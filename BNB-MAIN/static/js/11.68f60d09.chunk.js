(this.webpackJsonpuniswap=this.webpackJsonpuniswap||[]).push([[11],{1266:function(e,g,m){"use strict";(function(i){Object.defineProperty(g,"__esModule",{value:!0});var t=m(1773),e=m(1774),s=m(1290),r=m(474),n=m(1296),a=m(1775),c=m(1270);g.OPS=m(1369);var u=m(1776),o=g.OPS.OP_RESERVED;function f(e){return s.Buffer(e)||(t=e,s.Number(t)&&(t===g.OPS.OP_0||t>=g.OPS.OP_1&&t<=g.OPS.OP_16||t===g.OPS.OP_1NEGATE));var t}function p(e){return s.Array(e)&&e.every(f)}function h(e){return 0===e.length?g.OPS.OP_0:1===e.length?1<=e[0]&&e[0]<=16?o+e[0]:129===e[0]?g.OPS.OP_1NEGATE:void 0:void 0}function l(e){return i.isBuffer(e)}function d(e){return i.isBuffer(e)}function v(e){if(l(e))return e;c(s.Array,e);var t=e.reduce(function(e,t){return!d(t)||1===t.length&&void 0!==h(t)?e+1:e+a.encodingLength(t.length)+t.length},0),r=i.allocUnsafe(t),n=0;if(e.forEach(function(e){if(d(e)){var t=h(e);if(void 0!==t)return r.writeUInt8(t,n),void(n+=1);n+=a.encode(r,e.length,n),e.copy(r,n),n+=e.length}else r.writeUInt8(e,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}function y(e){if(s.Array(e))return e;c(s.Buffer,e);for(var t=[],r=0;r<e.length;){var n=e[r];if(n>g.OPS.OP_0&&n<=g.OPS.OP_PUSHDATA4){var i=a.decode(e,r);if(null===i)return null;if((r+=i.size)+i.number>e.length)return null;var u=e.slice(r,r+i.number);r+=i.number;var o=h(u);void 0!==o?t.push(o):t.push(u)}else t.push(n),r+=1}return t}function w(e){var t=-129&e;return 0<t&&t<4}g.isPushOnly=p,g.compile=v,g.decompile=y,g.toASM=function(e){return l(e)&&(e=y(e)),e.map(function(e){if(d(e)){var t=h(e);if(void 0===t)return e.toString("hex");e=t}return u[e]}).join(" ")},g.fromASM=function(e){return c(s.String,e),v(e.split(" ").map(function(e){return void 0!==g.OPS[e]?g.OPS[e]:(c(s.Hex,e),i.from(e,"hex"))}))},g.toStack=function(e){return e=y(e),c(p,e),e.map(function(e){return d(e)?e:e===g.OPS.OP_0?i.allocUnsafe(0):t.encode(e-o)})},g.isCanonicalPubKey=function(e){return n.isPoint(e)},g.isDefinedHashType=w,g.isCanonicalScriptSignature=function(e){return!!i.isBuffer(e)&&!!w(e[e.length-1])&&r.check(e.slice(0,-1))},g.number=t,g.signature=e}).call(this,m(10).Buffer)},1270:function(e,t,r){var n,i=r(1495),o=r(1422),s=i.tfJSON,u=i.TfTypeError,a=i.TfPropertyTypeError,c=i.tfSubError,f=i.getValueTypeName,p={arrayOf:function(n,t){function e(e,r){return!!o.Array(e)&&!o.Nil(e)&&!(void 0!==t.minLength&&e.length<t.minLength)&&!(void 0!==t.maxLength&&e.length>t.maxLength)&&(void 0===t.length||e.length===t.length)&&e.every(function(e,t){try{return l(n,e,r)}catch(e){throw c(e,t)}})}return n=h(n),t=t||{},e.toJSON=function(){var e="["+s(n)+"]";return void 0!==t.length?e+="{"+t.length+"}":void 0===t.minLength&&void 0===t.maxLength||(e+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),e},e},maybe:function r(n){function e(e,t){return o.Nil(e)||n(e,t,r)}return n=h(n),e.toJSON=function(){return"?"+s(n)},e},map:function(i,u){function e(e,t){if(!o.Object(e))return!1;if(o.Nil(e))return!1;for(var r in e){try{u&&l(u,r,t)}catch(e){throw c(e,r,"key")}try{var n=e[r];l(i,n,t)}catch(e){throw c(e,r)}}return!0}return i=h(i),u=u&&h(u),e.toJSON=u?function(){return"{"+s(u)+": "+s(i)+"}"}:function(){return"{"+s(i)+"}"},e},object:function(e){var t,n={};for(t in e)n[t]=h(e[t]);function r(e,t){if(!o.Object(e))return!1;if(o.Nil(e))return!1;try{for(var r in n)l(n[r],e[r],t)}catch(e){throw c(e,r)}if(t)for(r in e)if(!n[r])throw new a(void 0,r);return!0}return r.toJSON=function(){return s(n)},r},anyOf:function(){var e=[].slice.call(arguments).map(h);function t(t,r){return e.some(function(e){try{return l(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(s).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(h);function t(t,r){return e.every(function(e){try{return l(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(s).join(" & ")},t},quacksLike:function(t){function e(e){return t===f(e)}return e.toJSON=function(){return t},e},tuple:function(){var e=[].slice.call(arguments).map(h);function t(r,n){return!o.Nil(r)&&!o.Nil(r.length)&&(!n||r.length===e.length)&&e.every(function(e,t){try{return l(e,r[t],n)}catch(e){throw c(e,t)}})}return t.toJSON=function(){return"("+e.map(s).join(", ")+")"},t},value:function(t){function e(e){return e===t}return e.toJSON=function(){return t},e}};function h(e){if(o.String(e))return"?"===e[0]?p.maybe(e.slice(1)):o[e]||p.quacksLike(e);if(e&&o.Object(e)){if(o.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return p.arrayOf(e[0])}return p.object(e)}return o.Function(e)?e:p.value(e)}function l(e,t,r,n){if(o.Function(e)){if(e(t,r))return!0;throw new u(n||e,t)}return l(h(e),t,r)}for(n in p.oneOf=p.anyOf,o)l[n]=o[n];for(n in p)l[n]=p[n];var d=r(1771);for(n in d)l[n]=d[n];l.compile=h,l.TfTypeError=u,l.TfPropertyTypeError=a,e.exports=l},1280:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitcoin={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},t.regtest={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},t.testnet={messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}},1281:function(e,t,r){"use strict";var n,i,u;Object.defineProperty(t,"__esModule",{value:!0}),(u=t.GlobalTypes||(t.GlobalTypes={}))[u.UNSIGNED_TX=0]="UNSIGNED_TX",u[u.GLOBAL_XPUB=1]="GLOBAL_XPUB",t.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(i=t.InputTypes||(t.InputTypes={}))[i.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",i[i.WITNESS_UTXO=1]="WITNESS_UTXO",i[i.PARTIAL_SIG=2]="PARTIAL_SIG",i[i.SIGHASH_TYPE=3]="SIGHASH_TYPE",i[i.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",i[i.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",i[i.BIP32_DERIVATION=6]="BIP32_DERIVATION",i[i.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",i[i.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",i[i.POR_COMMITMENT=9]="POR_COMMITMENT",t.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment"],(n=t.OutputTypes||(t.OutputTypes={}))[n.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=2]="BIP32_DERIVATION",t.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation"]},1286:function(e,t,r){var n=r(1325),i=r(1326),u=r(241),o=r(1327);e.exports=function(e,t){return n(e)||i(e,t)||u(e,t)||o()}},1290:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1270),i=Math.pow(2,31)-1;function u(e){return n.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}t.UInt31=function(e){return n.UInt32(e)&&e<=i},(t.BIP32Path=u).toJSON=function(){return"BIP32 derivation path"},t.Signer=function(e){return(n.Buffer(e.publicKey)||"function"==typeof e.getPublicKey)&&"function"==typeof e.sign},t.Satoshi=function(e){return n.UInt53(e)&&e<=21e14},t.ECPoint=n.quacksLike("Point"),t.Network=n.compile({messagePrefix:n.oneOf(n.Buffer,n.String),bip32:{public:n.UInt32,private:n.UInt32},pubKeyHash:n.UInt8,scriptHash:n.UInt8,wif:n.UInt8}),t.Buffer256bit=n.BufferN(32),t.Hash160bit=n.BufferN(20),t.Hash256bit=n.BufferN(32),t.Number=n.Number,t.Array=n.Array,t.Boolean=n.Boolean,t.String=n.String,t.Buffer=n.Buffer,t.Hex=n.Hex,t.maybe=n.maybe,t.tuple=n.tuple,t.UInt8=n.UInt8,t.UInt32=n.UInt32,t.Function=n.Function,t.BufferN=n.BufferN,t.Null=n.Null,t.oneOf=n.oneOf},1292:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61);function i(t){try{return n("rmd160").update(t).digest()}catch(e){return n("ripemd160").update(t).digest()}}function u(e){return n("sha256").update(e).digest()}t.ripemd160=i,t.sha1=function(e){return n("sha1").update(e).digest()},t.sha256=u,t.hash160=function(e){return i(u(e))},t.hash256=function(e){return u(u(e))}},1296:function(e,t,o){(function(v){var t=o(26),r=new(o(95).ec)("secp256k1"),a=o(1770),c=v.alloc(32,0),y=v.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),i=v.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),w=r.curve.n,g=w.shrn(1),m=r.curve.g;function S(e){return v.isBuffer(e)&&32===e.length}function f(e){return S(e)&&e.compare(y)<0}function b(e){if(!v.isBuffer(e))return!1;if(e.length<33)return!1;var t=e[0],r=e.slice(1,33);if(0===r.compare(c))return!1;if(0<=r.compare(i))return!1;if((2===t||3===t)&&33===e.length){try{_(e)}catch(e){return!1}return!0}var n=e.slice(33);return 0!==n.compare(c)&&!(0<=n.compare(i))&&4===t&&65===e.length}function n(e){return 4!==e[0]}function p(e){return!!S(e)&&0<e.compare(c)&&e.compare(y)<0}function h(e,t){return void 0===e&&void 0!==t?n(t):void 0===e||e}function E(e){return new t(e)}function l(e){return e.toArrayLike(v,"be",32)}function _(e){return r.curve.decodePoint(e)}function d(e,t){return v.from(e._encode(t))}function u(e,t,r){if(!S(e))throw new TypeError("Expected Hash");if(!p(t))throw new TypeError("Expected Private");if(void 0!==r&&!S(r))throw new TypeError("Expected Extra Data (32 bytes)");var n,i,u=E(t),o=E(e);a(e,t,function(e){var t=E(e),r=m.mul(t);return!r.isInfinity()&&0!==(n=r.x.umod(w)).isZero()&&0!==(i=t.invm(w).mul(o.add(u.mul(n))).umod(w)).isZero()},p,r),0<i.cmp(g)&&(i=w.sub(i));var s=v.allocUnsafe(64);return l(n).copy(s,0),l(i).copy(s,32),s}e.exports={isPoint:b,isPointCompressed:function(e){return!!b(e)&&n(e)},isPrivate:p,pointAdd:function(e,t,r){if(!b(e))throw new TypeError("Expected Point");if(!b(t))throw new TypeError("Expected Point");var n=_(e),i=_(t),u=n.add(i);return u.isInfinity()?null:d(u,h(r,e))},pointAddScalar:function(e,t,r){if(!b(e))throw new TypeError("Expected Point");if(!f(t))throw new TypeError("Expected Tweak");var n=h(r,e),i=_(e);if(0===t.compare(c))return d(i,n);var u=E(t),o=m.mul(u),s=i.add(o);return s.isInfinity()?null:d(s,n)},pointCompress:function(e,t){if(!b(e))throw new TypeError("Expected Point");var r=_(e);if(r.isInfinity())throw new TypeError("Expected Point");return d(r,h(t,e))},pointFromScalar:function(e,t){if(!p(e))throw new TypeError("Expected Private");var r=E(e),n=m.mul(r);return n.isInfinity()?null:d(n,h(t))},pointMultiply:function(e,t,r){if(!b(e))throw new TypeError("Expected Point");if(!f(t))throw new TypeError("Expected Tweak");var n=h(r,e),i=_(e),u=E(t),o=i.mul(u);return o.isInfinity()?null:d(o,n)},privateAdd:function(e,t){if(!p(e))throw new TypeError("Expected Private");if(!f(t))throw new TypeError("Expected Tweak");var r=E(e),n=E(t),i=l(r.add(n).umod(w));return p(i)?i:null},privateSub:function(e,t){if(!p(e))throw new TypeError("Expected Private");if(!f(t))throw new TypeError("Expected Tweak");var r=E(e),n=E(t),i=l(r.sub(n).umod(w));return p(i)?i:null},sign:function(e,t){return u(e,t)},signWithEntropy:u,verify:function(e,t,r,n){if(!S(e))throw new TypeError("Expected Hash");if(!b(t))throw new TypeError("Expected Point");if(u=(i=r).slice(0,32),o=i.slice(32,64),!(v.isBuffer(i)&&64===i.length&&u.compare(y)<0&&o.compare(y)<0))throw new TypeError("Expected Signature");var i,u,o,s=_(t),a=E(r.slice(0,32)),c=E(r.slice(32,64));if(n&&0<c.cmp(g))return!1;if(a.gtn(0)<=0)return!1;if(c.gtn(0)<=0)return!1;var f=E(e),p=c.invm(w),h=f.mul(p).umod(w),l=a.mul(p).umod(w),d=m.mulAdd(h,s,l);return!d.isInfinity()&&d.x.umod(w).eq(a)}}}).call(this,o(10).Buffer)},1308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=r.call(this);return this[t]=e},set:function(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},t.value=function(e){var t;return function(){return void 0!==t?t:t=e()}}},1325:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},1326:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,u=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,u=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw u}}return r}}},1327:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},1337:function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.-]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},1338:function(e,t,r){},1342:function(e,t,r){"use strict";var n=r(61),i=r(1767);e.exports=i(function(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()})},1344:function(e,t,r){"use strict";function d(e){return v.a.createElement("div",n({style:u},e))}var i,m=r(0),v=r.n(m),S=0,b=r(91),c=r(240),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u={border:0,clip:"rect(0 0 0 0)",height:"1px",width:"1px",margin:"-1px",padding:0,overflow:"hidden",position:"absolute"},o=(r(109),["bottom","height","left","right","top","width"]),s=new Map,a=function(r,n){return{observe:function(){var e=0===s.size;s.has(r)?s.get(r).callbacks.push(n):s.set(r,{rect:void 0,hasRectChanged:!1,callbacks:[n]}),e&&function e(){var u=[];s.forEach(function(e,t){var r=t.getBoundingClientRect(),n=r,i=e.rect;void 0===n&&(n={}),void 0===i&&(i={}),o.some(function(e){return n[e]!==i[e]})&&(e.rect=r,u.push(e))}),u.forEach(function(t){t.callbacks.forEach(function(e){return e(t.rect)})}),i=window.requestAnimationFrame(e)}()},unobserve:function(){var e,t=s.get(r);t&&(0<=(e=t.callbacks.indexOf(n))&&t.callbacks.splice(e,1),t.callbacks.length||s.delete(r),s.size||cancelAnimationFrame(i))}}};r(2),Object.assign;function E(e,t){var r=!(1<arguments.length&&void 0!==t)||t,n=Object(m.useState)(null),i=n[0],u=n[1],o=Object(m.useRef)(null);return Object(m.useLayoutEffect)(function(){return o.current||(o.current=a(e.current,u)),r&&o.current.observe(),function(){return o.current.unobserve()}},[r]),i}r.d(t,"a",function(){return A});var f,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function w(e,t){var r,n={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var _="idle",k="focused",T="visible",p={initial:_,states:((f={})[_]={enter:g,on:{mouseenter:k,focus:T}},f[k]={enter:function(){clearTimeout(h),h=setTimeout(function(){return P("rest")},100)},leave:function(){clearTimeout(h)},on:{mousemove:k,mouseleave:_,mousedown:"dismissed",blur:_,rest:T}},f[T]={on:{focus:k,mouseenter:k,mouseleave:"leavingVisible",blur:"leavingVisible",mousedown:"dismissed",selectWithKeyboard:"dismissed",globalMouseMove:"leavingVisible"}},f.leavingVisible={enter:function(){clearTimeout(l),l=setTimeout(function(){return P("timecomplete")},500)},leave:function(){clearTimeout(l),g()},on:{mouseenter:T,focus:T,timecomplete:_}},f.dismissed={leave:function(){O.id=null},on:{mouseleave:_,blur:_}},f)},O={id:null},I=p.initial;function P(e,t){var r=p.states[I],n=r.on[e];if(!n)throw new Error('Unknown state for action "'+e+'" from state "'+I+'"');r.leave&&r.leave(),t&&(O=t);var i=p.states[n];i.enter&&i.enter(),I=n,N.forEach(function(e){return e(I,O)})}var N=[];var h=void 0,l=void 0;function g(){O.id=null}function A(e){var t=e.children,r=e.label,n=e.ariaLabel,i=e.DEBUG_STYLE,u=w(e,["children","label","ariaLabel","DEBUG_STYLE"]),o=function(e){var t,r,n,i=0<arguments.length&&void 0!==e?e:{},u=i.onMouseEnter,o=i.onMouseMove,s=i.onMouseLeave,a=i.onFocus,c=(i.onBlur,i.onKeyDown),f=i.onMouseDown,p=i.ref,h=i.DEBUG_STYLE,l="tooltip:"+(t=Object(m.useState)(null),r=t[0],n=t[1],Object(m.useEffect)(function(){return n(++S)},[]),r),d=Object(m.useState)(!!h||O.id===l&&I===T),v=d[0],y=d[1],w=p||Object(m.useRef)(),g=E(w,v);Object(m.useEffect)(function(){return e=function(){O.id!==l||I!==T&&"leavingVisible"!==I?y(!1):y(!0)},N.push(e),function(){N.splice(N.indexOf(e),1)};var e},[l]),Object(m.useEffect)(function(){return Object(b.b)("tooltip")});return[{"aria-describedby":l,"data-reach-tooltip-trigger":"",ref:w,onMouseEnter:Object(b.c)(u,function(){switch(I){case _:case T:case"leavingVisible":P("mouseenter",{id:l})}}),onMouseMove:Object(b.c)(o,function(){I===k&&P("mousemove",{id:l})}),onFocus:Object(b.c)(a,function(e){if(!window.__REACH_DISABLE_TOOLTIPS)switch(I){case _:case T:case"leavingVisible":P("focus",{id:l})}}),onBlur:Object(b.c)(a,function(){if(O.id===l)switch(I){case k:case T:case"dismissed":P("blur")}}),onMouseLeave:Object(b.c)(s,function(){switch(I){case k:case T:case"dismissed":P("mouseleave")}}),onKeyDown:Object(b.c)(c,function(e){"Enter"!==e.key&&" "!==e.key||I===T&&P("selectWithKeyboard")}),onMouseDown:Object(b.c)(f,function(){if(O.id===l)switch(I){case k:case T:P("mousedown")}})},{id:l,triggerRect:g,isVisible:v},v]}({DEBUG_STYLE:i}),s=o[0],a=o[1];return v.a.createElement(m.Fragment,null,Object(m.cloneElement)(m.Children.only(t),s),v.a.createElement(U,y({label:r,ariaLabel:n},a,u)))}var U=Object(m.forwardRef)(function(e,t){var r=e.label,n=e.ariaLabel,i=e.position,u=e.isVisible,o=e.id,s=e.triggerRect,a=w(e,["label","ariaLabel","position","isVisible","id","triggerRect"]);return u?v.a.createElement(c.a,null,v.a.createElement(H,y({label:r,ariaLabel:n,position:i,isVisible:u,id:o,triggerRect:s,ref:t},a))):null}),H=Object(m.forwardRef)(function(e,t){var r=e.label,n=e.ariaLabel,i=e.position,u=void 0===i?B:i,o=e.isVisible,s=e.id,a=e.triggerRect,c=e.style,f=w(e,["label","ariaLabel","position","isVisible","id","triggerRect","style"]),p=null!=n,h=Object(m.useRef)(),l=E(h,o);return v.a.createElement(m.Fragment,null,v.a.createElement("div",y({"data-reach-tooltip":!0,role:p?void 0:"tooltip",id:p?void 0:s,children:r,style:y({},c,x(u,a,l)),ref:function(e){h.current=e,t&&t(e)}},f)),p&&v.a.createElement(d,{role:"tooltip",id:s},n))}),x=function(e,t,r){return r?e(t,r):{visibility:"hidden"}},B=function(e,t){var r={left:e.left+window.pageXOffset+"px",top:e.top+e.height+window.pageYOffset+"px"},n={top:e.top-t.height<0,right:window.innerWidth<e.left+t.width,bottom:window.innerHeight<e.bottom+t.height+8,left:e.left-t.width<0},i=n.bottom&&!n.top;return y({},r,{left:n.right&&!n.left?e.right-t.width+window.pageXOffset+"px":e.left+window.pageXOffset+"px",top:i?e.top-8-t.height+window.pageYOffset+"px":e.top+8+e.height+window.pageYOffset+"px"})}},1368:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1772);t.embed=n.p2data;var i=r(1777);t.p2ms=i.p2ms;var u=r(1778);t.p2pk=u.p2pk;var o=r(1779);t.p2pkh=o.p2pkh;var s=r(1780);t.p2sh=s.p2sh;var a=r(1781);t.p2wpkh=a.p2wpkh;var c=r(1782);t.p2wsh=c.p2wsh},1369:function(e){e.exports=JSON.parse('{"OP_FALSE":0,"OP_0":0,"OP_PUSHDATA1":76,"OP_PUSHDATA2":77,"OP_PUSHDATA4":78,"OP_1NEGATE":79,"OP_RESERVED":80,"OP_TRUE":81,"OP_1":81,"OP_2":82,"OP_3":83,"OP_4":84,"OP_5":85,"OP_6":86,"OP_7":87,"OP_8":88,"OP_9":89,"OP_10":90,"OP_11":91,"OP_12":92,"OP_13":93,"OP_14":94,"OP_15":95,"OP_16":96,"OP_NOP":97,"OP_VER":98,"OP_IF":99,"OP_NOTIF":100,"OP_VERIF":101,"OP_VERNOTIF":102,"OP_ELSE":103,"OP_ENDIF":104,"OP_VERIFY":105,"OP_RETURN":106,"OP_TOALTSTACK":107,"OP_FROMALTSTACK":108,"OP_2DROP":109,"OP_2DUP":110,"OP_3DUP":111,"OP_2OVER":112,"OP_2ROT":113,"OP_2SWAP":114,"OP_IFDUP":115,"OP_DEPTH":116,"OP_DROP":117,"OP_DUP":118,"OP_NIP":119,"OP_OVER":120,"OP_PICK":121,"OP_ROLL":122,"OP_ROT":123,"OP_SWAP":124,"OP_TUCK":125,"OP_CAT":126,"OP_SUBSTR":127,"OP_LEFT":128,"OP_RIGHT":129,"OP_SIZE":130,"OP_INVERT":131,"OP_AND":132,"OP_OR":133,"OP_XOR":134,"OP_EQUAL":135,"OP_EQUALVERIFY":136,"OP_RESERVED1":137,"OP_RESERVED2":138,"OP_1ADD":139,"OP_1SUB":140,"OP_2MUL":141,"OP_2DIV":142,"OP_NEGATE":143,"OP_ABS":144,"OP_NOT":145,"OP_0NOTEQUAL":146,"OP_ADD":147,"OP_SUB":148,"OP_MUL":149,"OP_DIV":150,"OP_MOD":151,"OP_LSHIFT":152,"OP_RSHIFT":153,"OP_BOOLAND":154,"OP_BOOLOR":155,"OP_NUMEQUAL":156,"OP_NUMEQUALVERIFY":157,"OP_NUMNOTEQUAL":158,"OP_LESSTHAN":159,"OP_GREATERTHAN":160,"OP_LESSTHANOREQUAL":161,"OP_GREATERTHANOREQUAL":162,"OP_MIN":163,"OP_MAX":164,"OP_WITHIN":165,"OP_RIPEMD160":166,"OP_SHA1":167,"OP_SHA256":168,"OP_HASH160":169,"OP_HASH256":170,"OP_CODESEPARATOR":171,"OP_CHECKSIG":172,"OP_CHECKSIGVERIFY":173,"OP_CHECKMULTISIG":174,"OP_CHECKMULTISIGVERIFY":175,"OP_NOP1":176,"OP_NOP2":177,"OP_CHECKLOCKTIMEVERIFY":177,"OP_NOP3":178,"OP_CHECKSEQUENCEVERIFY":178,"OP_NOP4":179,"OP_NOP5":180,"OP_NOP6":181,"OP_NOP7":182,"OP_NOP8":183,"OP_NOP9":184,"OP_NOP10":185,"OP_PUBKEYHASH":253,"OP_PUBKEY":254,"OP_INVALIDOPCODE":255}')},1370:function(e,l,d){"use strict";(function(r){var n=d(135),e=d(136);Object.defineProperty(l,"__esModule",{value:!0});var i=d(1290),u=d(1270),t=d(1426);function o(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(t<e)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function s(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return o((n*=4294967296)+r,9007199254740991),n+r}function a(e,t,r){return o(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}l.readUInt64LE=s,l.writeUInt64LE=a,l.reverseBuffer=function(e){if(e.length<1)return e;for(var t,r=e.length-1,n=0;n<e.length/2;n++)t=e[n],e[n]=e[r],e[r]=t,r--;return e},l.cloneBuffer=function(e){var t=r.alloc(e.length);return e.copy(t),e};var c=(e(f,[{key:"writeUInt8",value:function(e){this.offset=this.buffer.writeUInt8(e,this.offset)}},{key:"writeInt32",value:function(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}},{key:"writeUInt32",value:function(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}},{key:"writeUInt64",value:function(e){this.offset=a(this.buffer,e,this.offset)}},{key:"writeVarInt",value:function(e){t.encode(e,this.buffer,this.offset),this.offset+=t.encode.bytes}},{key:"writeSlice",value:function(e){if(this.buffer.length<this.offset+e.length)throw new Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}},{key:"writeVarSlice",value:function(e){this.writeVarInt(e.length),this.writeSlice(e)}},{key:"writeVector",value:function(e){var t=this;this.writeVarInt(e.length),e.forEach(function(e){return t.writeVarSlice(e)})}}]),f);function f(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,f),this.buffer=e,this.offset=t,u(i.tuple(i.Buffer,i.UInt32),[e,t])}l.BufferWriter=c;var p=(e(h,[{key:"readUInt8",value:function(){var e=this.buffer.readUInt8(this.offset);return this.offset++,e}},{key:"readInt32",value:function(){var e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt32",value:function(){var e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readUInt64",value:function(){var e=s(this.buffer,this.offset);return this.offset+=8,e}},{key:"readVarInt",value:function(){var e=t.decode(this.buffer,this.offset);return this.offset+=t.decode.bytes,e}},{key:"readSlice",value:function(e){if(this.buffer.length<this.offset+e)throw new Error("Cannot read slice out of bounds");var t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readVarSlice",value:function(){return this.readSlice(this.readVarInt())}},{key:"readVector",value:function(){for(var e=this.readVarInt(),t=[],r=0;r<e;r++)t.push(this.readVarSlice());return t}}]),h);function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;n(this,h),this.buffer=e,this.offset=t,u(i.tuple(i.Buffer,i.UInt32),[e,t])}l.BufferReader=p}).call(this,d(10).Buffer)},1371:function(e,u,o){"use strict";(function(h){var e=o(135),t=o(136);Object.defineProperty(u,"__esModule",{value:!0});var l=o(1370),d=o(1292),s=o(1266),a=o(1266),v=o(1290),y=o(1270),i=o(1426);function w(e){var t=e.length;return i.encodingLength(t)+t}var c=h.allocUnsafe(0),g=[],m=h.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),f=h.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),r=h.from("ffffffffffffffff","hex"),p={script:c,valueBuffer:r};var n=(t(S,[{key:"isCoinbase",value:function(){return 1===this.ins.length&&S.isCoinbaseHash(this.ins[0].hash)}},{key:"addInput",value:function(e,t,r,n){return y(v.tuple(v.Hash256bit,v.UInt32,v.maybe(v.UInt32),v.maybe(v.Buffer)),arguments),v.Null(r)&&(r=S.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||c,sequence:r,witness:g})-1}},{key:"addOutput",value:function(e,t){return y(v.tuple(v.Buffer,v.Satoshi),arguments),this.outs.push({script:e,value:t})-1}},{key:"hasWitnesses",value:function(){return this.ins.some(function(e){return 0!==e.witness.length})}},{key:"weight",value:function(){return 3*this.byteLength(!1)+this.byteLength(!0)}},{key:"virtualSize",value:function(){return Math.ceil(this.weight()/4)}},{key:"byteLength",value:function(){var e=(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.hasWitnesses();return(e?10:8)+i.encodingLength(this.ins.length)+i.encodingLength(this.outs.length)+this.ins.reduce(function(e,t){return e+40+w(t.script)},0)+this.outs.reduce(function(e,t){return e+8+w(t.script)},0)+(e?this.ins.reduce(function(e,t){return e+(r=t.witness,n=r.length,i.encodingLength(n)+r.reduce(function(e,t){return e+w(t)},0));var r,n},0):0)}},{key:"clone",value:function(){var e=new S;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}}),e.outs=this.outs.map(function(e){return{script:e.script,value:e.value}}),e}},{key:"hashForSignature",value:function(r,e,t){if(y(v.tuple(v.UInt32,v.Buffer,v.Number),arguments),r>=this.ins.length)return f;var n=s.compile(s.decompile(e).filter(function(e){return e!==a.OPS.OP_CODESEPARATOR})),i=this.clone();if((31&t)===S.SIGHASH_NONE)i.outs=[],i.ins.forEach(function(e,t){t!==r&&(e.sequence=0)});else if((31&t)===S.SIGHASH_SINGLE){if(r>=this.outs.length)return f;i.outs.length=r+1;for(var u=0;u<r;u++)i.outs[u]=p;i.ins.forEach(function(e,t){t!==r&&(e.sequence=0)})}t&S.SIGHASH_ANYONECANPAY?(i.ins=[i.ins[r]],i.ins[0].script=n):(i.ins.forEach(function(e){e.script=c}),i.ins[r].script=n);var o=h.allocUnsafe(i.byteLength(!1)+4);return o.writeInt32LE(t,o.length-4),i.__toBuffer(o,0,!1),d.hash256(o)}},{key:"hashForWitnessV0",value:function(e,t,r,n){y(v.tuple(v.UInt32,v.Buffer,v.Satoshi,v.UInt32),arguments);var i,u,o,s=h.from([]),a=m,c=m,f=m;n&S.SIGHASH_ANYONECANPAY||(s=h.allocUnsafe(36*this.ins.length),u=new l.BufferWriter(s,0),this.ins.forEach(function(e){u.writeSlice(e.hash),u.writeUInt32(e.index)}),c=d.hash256(s)),n&S.SIGHASH_ANYONECANPAY||(31&n)===S.SIGHASH_SINGLE||(31&n)===S.SIGHASH_NONE||(s=h.allocUnsafe(4*this.ins.length),u=new l.BufferWriter(s,0),this.ins.forEach(function(e){u.writeUInt32(e.sequence)}),f=d.hash256(s)),(31&n)!==S.SIGHASH_SINGLE&&(31&n)!==S.SIGHASH_NONE?(i=this.outs.reduce(function(e,t){return e+8+w(t.script)},0),s=h.allocUnsafe(i),u=new l.BufferWriter(s,0),this.outs.forEach(function(e){u.writeUInt64(e.value),u.writeVarSlice(e.script)}),a=d.hash256(s)):(31&n)===S.SIGHASH_SINGLE&&e<this.outs.length&&(o=this.outs[e],s=h.allocUnsafe(8+w(o.script)),(u=new l.BufferWriter(s,0)).writeUInt64(o.value),u.writeVarSlice(o.script),a=d.hash256(s)),s=h.allocUnsafe(156+w(t)),u=new l.BufferWriter(s,0);var p=this.ins[e];return u.writeUInt32(this.version),u.writeSlice(c),u.writeSlice(f),u.writeSlice(p.hash),u.writeUInt32(p.index),u.writeVarSlice(t),u.writeUInt64(r),u.writeUInt32(p.sequence),u.writeSlice(a),u.writeUInt32(this.locktime),u.writeUInt32(n),d.hash256(s)}},{key:"getHash",value:function(e){return e&&this.isCoinbase()?h.alloc(32,0):d.hash256(this.__toBuffer(void 0,void 0,e))}},{key:"getId",value:function(){return l.reverseBuffer(this.getHash(!1)).toString("hex")}},{key:"toBuffer",value:function(e,t){return this.__toBuffer(e,t,!0)}},{key:"toHex",value:function(){return this.toBuffer(void 0,void 0).toString("hex")}},{key:"setInputScript",value:function(e,t){y(v.tuple(v.Number,v.Buffer),arguments),this.ins[e].script=t}},{key:"setWitness",value:function(e,t){y(v.tuple(v.Number,[v.Buffer]),arguments),this.ins[e].witness=t}},{key:"__toBuffer",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e=e||h.allocUnsafe(this.byteLength(r));var n=new l.BufferWriter(e,t||0);n.writeInt32(this.version);var i=r&&this.hasWitnesses();return i&&(n.writeUInt8(S.ADVANCED_TRANSACTION_MARKER),n.writeUInt8(S.ADVANCED_TRANSACTION_FLAG)),n.writeVarInt(this.ins.length),this.ins.forEach(function(e){n.writeSlice(e.hash),n.writeUInt32(e.index),n.writeVarSlice(e.script),n.writeUInt32(e.sequence)}),n.writeVarInt(this.outs.length),this.outs.forEach(function(e){void 0!==e.value?n.writeUInt64(e.value):n.writeSlice(e.valueBuffer),n.writeVarSlice(e.script)}),i&&this.ins.forEach(function(e){n.writeVector(e.witness)}),n.writeUInt32(this.locktime),void 0!==t?e.slice(t,n.offset):e}}],[{key:"fromBuffer",value:function(e,t){var r=new l.BufferReader(e),n=new S;n.version=r.readInt32();var i=r.readUInt8(),u=r.readUInt8(),o=!1;i===S.ADVANCED_TRANSACTION_MARKER&&u===S.ADVANCED_TRANSACTION_FLAG?o=!0:r.offset-=2;for(var s=r.readVarInt(),a=0;a<s;++a)n.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:g});for(var c=r.readVarInt(),f=0;f<c;++f)n.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(o){for(var p=0;p<s;++p)n.ins[p].witness=r.readVector();if(!n.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(n.locktime=r.readUInt32(),t)return n;if(r.offset!==e.length)throw new Error("Transaction has unexpected data");return n}},{key:"fromHex",value:function(e){return S.fromBuffer(h.from(e,"hex"),!1)}},{key:"isCoinbaseHash",value:function(e){y(v.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0}}]),S);function S(){e(this,S),this.version=1,this.locktime=0,this.ins=[],this.outs=[]}n.DEFAULT_SEQUENCE=4294967295,n.SIGHASH_ALL=1,n.SIGHASH_NONE=2,n.SIGHASH_SINGLE=3,n.SIGHASH_ANYONECANPAY=128,n.ADVANCED_TRANSACTION_MARKER=0,n.ADVANCED_TRANSACTION_FLAG=1,u.Transaction=n}).call(this,o(10).Buffer)},1372:function(e,t,r){"use strict";(function(o){function s(e){if(e<0||9007199254740991<e||e%1!=0)throw new RangeError("value out of range")}function i(e){return s(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=function e(t,r,n){if(s(t),r=r||o.allocUnsafe(i(t)),!o.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n=n||0,t<253?(r.writeUInt8(t,n),Object.assign(e,{bytes:1})):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),Object.assign(e,{bytes:3})):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),Object.assign(e,{bytes:5})):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),Object.assign(e,{bytes:9})),r},t.decode=function e(t,r){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r=r||0;var n=t.readUInt8(r);if(n<253)return Object.assign(e,{bytes:1}),n;if(253===n)return Object.assign(e,{bytes:3}),t.readUInt16LE(r+1);if(254===n)return Object.assign(e,{bytes:5}),t.readUInt32LE(r+1);Object.assign(e,{bytes:9});var i=t.readUInt32LE(r+1),u=4294967296*t.readUInt32LE(r+5)+i;return s(u),u},t.encodingLength=i}).call(this,r(10).Buffer)},1422:function(e,t){var r,n,i={Array:(r=function(e){return null!=e&&e.constructor===Array},u.toString=function(){return r.toString()},u),Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};function u(e){return r.apply(this,arguments)}for(n in i.Null=i.Nil,i)i[n].toJSON=function(e){return e}.bind(null,n);e.exports=i},1423:function(e,t,h){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(1280),u=h(1368),r=h(1266),o=h(1290),s=h(1424),a=h(1342),c=h(1270);function f(e){var t=a.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(21<t.length)throw new TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function p(e){var t=s.decode(e),r=s.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:n.from(r)}}t.fromBase58Check=f,t.fromBech32=p,t.toBase58Check=function(e,t){c(o.tuple(o.Hash160bit,o.UInt8),arguments);var r=n.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),a.encode(r)},t.toBech32=function(e,t,r){var n=s.toWords(e);return n.unshift(t),s.encode(r,n)},t.fromOutputScript=function(e,t){t=t||i.bitcoin;try{return u.p2pkh({output:e,network:t}).address}catch(e){}try{return u.p2sh({output:e,network:t}).address}catch(e){}try{return u.p2wpkh({output:e,network:t}).address}catch(e){}try{return u.p2wsh({output:e,network:t}).address}catch(e){}throw new Error(r.toASM(e)+" has no matching Address")},t.toOutputScript=function(e,t){var r,n;t=t||i.bitcoin;try{r=f(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return u.p2sh({hash:r.hash}).output}else{try{n=p(e)}catch(e){}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===n.version){if(20===n.data.length)return u.p2wpkh({hash:n.data}).output;if(32===n.data.length)return u.p2wsh({hash:n.data}).output}}}throw new Error(e+" has no matching Script")}}).call(this,h(10).Buffer)},1424:function(e,t,r){"use strict";for(var s="qpzry9x8gf2tvdw0s3jn54khce6mua7l",h={},n=0;n<s.length;n++){var i=s.charAt(n);if(void 0!==h[i])throw new TypeError(i+" is ambiguous");h[i]=n}function l(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function d(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||126<n)return"Invalid prefix ("+e+")";t=l(t)^n>>5}for(t=l(t),r=0;r<e.length;++r)var i=e.charCodeAt(r),t=l(t)^31&i;return t}function u(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var u=e.slice(0,i),o=e.slice(i+1);if(o.length<6)return"Data too short";var s=d(u);if("string"==typeof s)return s;for(var a=[],c=0;c<o.length;++c){var f=o.charAt(c),p=h[f];if(void 0===p)return"Unknown character "+f;s=l(s)^p,c+6>=o.length||a.push(p)}return 1!==s?"Invalid checksum for "+e:{prefix:u,words:a}}function o(e,t,r,n){for(var i=0,u=0,o=(1<<r)-1,s=[],a=0;a<e.length;++a)for(i=i<<t|e[a],u+=t;r<=u;)u-=r,s.push(i>>u&o);if(n)0<u&&s.push(i<<r-u&o);else{if(t<=u)return"Excess padding";if(i<<r-u&o)return"Non-zero padding"}return s}e.exports={decodeUnsafe:function(){var e=u.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=u.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=d(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",u=0;u<t.length;++u){var o=t[u];if(o>>5!=0)throw new Error("Non 5-bit word");n=l(n)^o,i+=s.charAt(o)}for(u=0;u<6;++u)n=l(n);for(n^=1,u=0;u<6;++u)i+=s.charAt(n>>5*(5-u)&31);return i},toWordsUnsafe:function(e){var t=o(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=o(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=o(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=o(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},1425:function(e,t,d){"use strict";(function(u){var n=d(135),e=d(136);Object.defineProperty(t,"__esModule",{value:!0});var i=d(1280),o=d(1290),s=d(1296),a=d(71),c=d(1270),f=d(1496),p=c.maybe(c.compile({compressed:o.maybe(o.Boolean),network:o.maybe(o.Network)})),r=(e(h,[{key:"toWIF",value:function(){if(!this.__D)throw new Error("Missing private key");return f.encode(this.network.wif,this.__D,this.compressed)}},{key:"sign",value:function(e,t){if(!this.__D)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return s.sign(e,this.__D);for(var r=s.sign(e,this.__D),n=u.alloc(32,0),i=0;127<r[0];)i++,n.writeUIntLE(i,0,6),r=s.signWithEntropy(e,this.__D,n);return r}},{key:"verify",value:function(e,t){return s.verify(e,this.publicKey,t)}},{key:"privateKey",get:function(){return this.__D}},{key:"publicKey",get:function(){return this.__Q||(this.__Q=s.pointFromScalar(this.__D,this.compressed)),this.__Q}}]),h);function h(e,t,r){n(this,h),this.__D=e,this.__Q=t,this.lowR=!1,void 0===r&&(r={}),this.compressed=void 0===r.compressed||r.compressed,this.network=r.network||i.bitcoin,void 0!==t&&(this.__Q=s.pointCompress(t,this.compressed))}function l(e,t){if(c(o.Buffer256bit,e),!s.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return c(p,t),new r(e,void 0,t)}t.fromPrivateKey=l,t.fromPublicKey=function(e,t){return c(s.isPoint,e),c(p,t),new r(void 0,e,t)},t.fromWIF=function(e,t){var r=f.decode(e),n=r.version;if(o.Array(t)){if(!(t=t.filter(function(e){return n===e.wif}).pop()))throw new Error("Unknown network version")}else if(t=t||i.bitcoin,n!==t.wif)throw new Error("Invalid network version");return l(r.privateKey,{compressed:r.compressed,network:t})},t.makeRandom=function(e){c(p,e),void 0===e&&(e={});for(var t,r=e.rng||a;t=r(32),c(o.Buffer256bit,t),!s.isPrivate(t););return l(t,e)}}).call(this,d(10).Buffer)},1426:function(e,t,r){"use strict";var o=r(12).Buffer;function s(e){if(e<0||9007199254740991<e||e%1!=0)throw new RangeError("value out of range")}function i(e){return s(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports={encode:function e(t,r,n){if(s(t),r=r||o.allocUnsafe(i(t)),!o.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n=n||0,t<253?(r.writeUInt8(t,n),e.bytes=1):t<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(t,n+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(t,n+1),e.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(t>>>0,n+1),r.writeUInt32LE(t/4294967296|0,n+5),e.bytes=9),r},decode:function e(t,r){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");r=r||0;var n=t.readUInt8(r);if(n<253)return e.bytes=1,n;if(253===n)return e.bytes=3,t.readUInt16LE(r+1);if(254===n)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var i=t.readUInt32LE(r+1),u=4294967296*t.readUInt32LE(r+5)+i;return s(u),u},encodingLength:i}},1427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1281),i=r(1789),u=r(1790),o=r(1791),s=r(1792),a=r(1793),c=r(1794),f=r(1795),p=r(1796),h=r(1797),l=r(1798),d=r(1799),v=r(1800),y=r(1801),w={unsignedTx:u,globalXpub:i,checkPubkey:d.makeChecker([])};t.globals=w;var g={nonWitnessUtxo:a,partialSig:c,sighashType:p,finalScriptSig:o,finalScriptWitness:s,porCommitment:f,witnessUtxo:h,bip32Derivation:l.makeConverter(n.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.InputTypes.REDEEM_SCRIPT),witnessScript:y.makeConverter(n.InputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.InputTypes.PARTIAL_SIG,n.InputTypes.BIP32_DERIVATION])};t.inputs=g;var m={bip32Derivation:l.makeConverter(n.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(n.OutputTypes.REDEEM_SCRIPT),witnessScript:y.makeConverter(n.OutputTypes.WITNESS_SCRIPT),checkPubkey:d.makeChecker([n.OutputTypes.BIP32_DERIVATION])};t.outputs=m},1428:function(e,n,u){"use strict";(function(o){var t=u(418);Object.defineProperty(n,"__esModule",{value:!0});var s=u(1372);function r(e){var t=e.key.length,r=e.value.length,n=s.encodingLength(t),i=s.encodingLength(r),u=o.allocUnsafe(n+t+i+r);return s.encode(t,u,0),e.key.copy(u,n),s.encode(r,u,n+t),e.value.copy(u,n+t+i),u}function i(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(t<e)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}n.range=function(e){return t(Array(e).keys())},n.reverseBuffer=function(e){if(e.length<1)return e;for(var t,r=e.length-1,n=0;n<e.length/2;n++)t=e[n],e[n]=e[r],e[r]=t,r--;return e},n.keyValsToBuffer=function(e){var t=e.map(r);return t.push(o.from([0])),o.concat(t)},n.keyValToBuffer=r,n.readUInt64LE=function(e,t){var r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return i((n*=4294967296)+r,9007199254740991),n+r},n.writeUInt64LE=function(e,t,r){return i(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}).call(this,u(10).Buffer)},1429:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1805);t.input=n;var i=r(1806);t.output=i},1430:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1808);t.input=n;var i=r(1809);t.output=i},1431:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1810);t.input=n;var i=r(1811);t.output=i},1495:function(e,t,r){var u=r(1422);function n(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function c(e){return u.Nil(e)?"":n(e.constructor)}function f(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function p(e){return u.Function(e)?e.toJSON?e.toJSON():n(e):u.Array(e)?"Array":e&&u.Object(e)?"Object":void 0!==e?e:""}function h(e,t,r){var n,i=(n=t,u.Function(n)?"":u.String(n)?JSON.stringify(n):n&&u.Object(n)?"":n);return"Expected "+p(e)+", got"+(""!==r?" "+r:"")+(""!==i?" "+i:"")}function l(e,t,r){r=r||c(t),this.message=h(e,t,r),f(this,l),this.__type=e,this.__value=t,this.__valueTypeName=r}function i(e,t,r,n,i){var u,o,s,a;e?(i=i||c(n),this.message=(u=e,o=n,s=i,a="key"===r?'" with key type ':'" of type ',h('property "'+p(t)+a+p(u),o,s))):this.message='Unexpected property "'+t+'"',f(this,l),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}(l.prototype=Object.create(Error.prototype)).constructor=l,(i.prototype=Object.create(Error.prototype)).constructor=l,e.exports={TfTypeError:l,TfPropertyTypeError:i,tfCustomError:function(e,t){return new l(e,{},t)},tfSubError:function(e,t,r){return e instanceof i?(t=t+"."+e.__property,e=new i(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof l&&(e=new i(e.__type,t,r,e.__value,e.__valueTypeName)),f(e),e},tfJSON:p,getValueTypeName:c}},1496:function(e,t,o){(function(i){var n=o(1342);function r(e,t){if(void 0!==t&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function u(e,t,r){var n=new i(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}e.exports={decode:function(e,t){return r(n.decode(e),t)},decodeRaw:r,encode:function(e,t,r){return"number"==typeof e?n.encode(u(e,t,r)):n.encode(u(e.version,e.privateKey,e.compressed))},encodeRaw:u}}).call(this,o(10).Buffer)},1497:function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(t(1788)),n(t(1802))},1498:function(e,i,t){"use strict";(function(r){Object.defineProperty(i,"__esModule",{value:!0});var d=t(1427);function n(e,t){var r=e[t];if(void 0===r)throw new Error("No input #".concat(t));return r}function v(e,t,r,n){throw new Error("Data for ".concat(e," key ").concat(t," is incorrect: Expected ")+"".concat(r," and got ").concat(JSON.stringify(n)))}function e(l){return function(c,f){for(var p=0,h=Object.keys(c);p<h.length;p++)!function(){var e=h[p],t=c[e],r=d[l+"s"][e]||{},n=r.canAdd,i=r.canAddToArray,u=r.check,o=r.expected;if(u)if(i){if(!Array.isArray(t)||f[e]&&!Array.isArray(f[e]))throw new Error("Key type ".concat(e," must be an array"));t.every(u)||v(l,e,o,t);var s=f[e]||[],a=new Set;if(!t.every(function(e){return i(s,e,a)}))throw new Error("Can not add duplicate data to array");f[e]=s.concat(t)}else{if(u(t)||v(l,e,o,t),!n(f,t))throw new Error("Can not add duplicate data to ".concat(l));f[e]=t}}()}}i.checkForInput=n,i.checkForOutput=function(e,t){var r=e[t];if(void 0===r)throw new Error("No output #".concat(t));return r},i.checkHasKey=function(t,e,r){if(t.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(e&&0!==e.filter(function(e){return e.key.equals(t.key)}).length)throw new Error("Duplicate Key: ".concat(t.key.toString("hex")))},i.getEnumLength=function(e){var t=0;return Object.keys(e).forEach(function(e){Number(isNaN(Number(e)))&&t++}),t},i.inputCheckUncleanFinalized=function(e,t){var r,n,i,u,o,s=!1;if(!t.nonWitnessUtxo!=!t.witnessUtxo&&(r=!!t.redeemScript,n=!!t.witnessScript,i=!r||!!t.finalScriptSig,u=!n||!!t.finalScriptWitness,o=!!t.finalScriptSig||!!t.finalScriptWitness,s=i&&u&&o),!1===s)throw new Error("Input #".concat(e," has too much or too little data to clean"))},i.updateGlobal=e("global"),i.updateInput=e("input"),i.updateOutput=e("output"),i.addInputAttributes=function(e,t){var r=n(e,e.length-1);i.updateInput(t,r)},i.addOutputAttributes=function(e,t){var r=n(e,e.length-1);i.updateOutput(t,r)},i.defaultVersionSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},i.defaultLocktimeSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}).call(this,t(10).Buffer)},1499:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){var t=n.compile(e);return 22===t.length&&t[0]===i.OPS.OP_0&&20===t[1]}(t.check=u).toJSON=function(){return"Witness pubKeyHash output"}},1500:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){var t=n.compile(e);return 34===t.length&&t[0]===i.OPS.OP_0&&32===t[1]}(t.check=u).toJSON=function(){return"Witness scriptHash output"}},1763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1764);t.bip32=n;var i=r(1423);t.address=i;var u=r(1292);t.crypto=u;var o=r(1425);t.ECPair=o;var s=r(1280);t.networks=s;var a=r(1368);t.payments=a;var c=r(1266);t.script=c;var f=r(1783);t.Block=f.Block;var p=r(1785);t.Psbt=p.Psbt;var h=r(1266);t.opcodes=h.OPS;var l=r(1371);t.Transaction=l.Transaction;var d=r(1803);t.TransactionBuilder=d.TransactionBuilder},1764:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1765);t.fromSeed=n.fromSeed,t.fromBase58=n.fromBase58,t.fromPublicKey=n.fromPublicKey,t.fromPrivateKey=n.fromPrivateKey},1765:function(e,m,S){"use strict";(function(c){var s=S(135),e=S(136);Object.defineProperty(m,"__esModule",{value:!0});var f=S(1766),p=S(1342),h=S(1296),l=S(1270),t=S(1496),o=l.BufferN(32),a=l.compile({wif:l.UInt8,bip32:{public:l.UInt32,private:l.UInt32}}),d={messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},r=Math.pow(2,31)-1;function n(e){return l.String(e)&&null!==e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}function i(e){return l.UInt32(e)&&e<=r}var v=(e(y,[{key:"isNeutered",value:function(){return void 0===this.__D}},{key:"neutered",value:function(){return g(this.publicKey,this.chainCode,this.network,this.depth,this.index,this.parentFingerprint)}},{key:"toBase58",value:function(){var e=this.network,t=this.isNeutered()?e.bip32.public:e.bip32.private,r=c.allocUnsafe(78);return r.writeUInt32BE(t,0),r.writeUInt8(this.depth,4),r.writeUInt32BE(this.parentFingerprint,5),r.writeUInt32BE(this.index,9),this.chainCode.copy(r,13),this.isNeutered()?this.publicKey.copy(r,45):(r.writeUInt8(0,45),this.privateKey.copy(r,46)),p.encode(r)}},{key:"toWIF",value:function(){if(!this.privateKey)throw new TypeError("Missing private key");return t.encode(this.network.wif,this.privateKey,!0)}},{key:"derive",value:function(e){l(l.UInt32,e);var t=2147483648<=e,r=c.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Missing private key for hardened child key");r[0]=0,this.privateKey.copy(r,1),r.writeUInt32BE(e,33)}else this.publicKey.copy(r,0),r.writeUInt32BE(e,33);var n,i=f.hmacSHA512(this.chainCode,r),u=i.slice(0,32),o=i.slice(32);if(!h.isPrivate(u))return this.derive(e+1);if(this.isNeutered()){var s=h.pointAddScalar(this.publicKey,u,!0);if(null===s)return this.derive(e+1);n=g(s,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}else{var a=h.privateAdd(this.privateKey,u);if(null==a)return this.derive(e+1);n=w(a,o,this.network,this.depth+1,e,this.fingerprint.readUInt32BE(0))}return n}},{key:"deriveHardened",value:function(e){return l(i,e),this.derive(e+2147483648)}},{key:"derivePath",value:function(e){l(n,e);var t=e.split("/");if("m"===t[0]){if(this.parentFingerprint)throw new TypeError("Expected master, got child");t=t.slice(1)}return t.reduce(function(e,t){var r;return"'"===t.slice(-1)?(r=parseInt(t.slice(0,-1),10),e.deriveHardened(r)):(r=parseInt(t,10),e.derive(r))},this)}},{key:"sign",value:function(e,t){if(!this.privateKey)throw new Error("Missing private key");if(void 0===t&&(t=this.lowR),!1===t)return h.sign(e,this.privateKey);for(var r=h.sign(e,this.privateKey),n=c.alloc(32,0),i=0;127<r[0];)i++,n.writeUIntLE(i,0,6),r=h.signWithEntropy(e,this.privateKey,n);return r}},{key:"verify",value:function(e,t){return h.verify(e,this.publicKey,t)}},{key:"depth",get:function(){return this.__DEPTH}},{key:"index",get:function(){return this.__INDEX}},{key:"parentFingerprint",get:function(){return this.__PARENT_FINGERPRINT}},{key:"publicKey",get:function(){return void 0===this.__Q&&(this.__Q=h.pointFromScalar(this.__D,!0)),this.__Q}},{key:"privateKey",get:function(){return this.__D}},{key:"identifier",get:function(){return f.hash160(this.publicKey)}},{key:"fingerprint",get:function(){return this.identifier.slice(0,4)}}]),y);function y(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;s(this,y),this.__D=e,this.__Q=t,this.chainCode=r,this.network=n,this.__DEPTH=i,this.__INDEX=u,this.__PARENT_FINGERPRINT=o,l(a,n),this.lowR=!1}function u(e,t,r){return w(e,t,r)}function w(e,t,r,n,i,u){if(l({privateKey:o,chainCode:o},{privateKey:e,chainCode:t}),r=r||d,!h.isPrivate(e))throw new TypeError("Private key not in range [1, n)");return new v(e,void 0,t,r,n,i,u)}function g(e,t,r,n,i,u){if(l({publicKey:l.BufferN(33),chainCode:o},{publicKey:e,chainCode:t}),r=r||d,!h.isPoint(e))throw new TypeError("Point is not on the curve");return new v(void 0,e,t,r,n,i,u)}m.fromBase58=function(e,t){var r=p.decode(e);if(78!==r.length)throw new TypeError("Invalid buffer length");t=t||d;var n=r.readUInt32BE(0);if(n!==t.bip32.private&&n!==t.bip32.public)throw new TypeError("Invalid network version");var i=r[4],u=r.readUInt32BE(5);if(0===i&&0!==u)throw new TypeError("Invalid parent fingerprint");var o=r.readUInt32BE(9);if(0===i&&0!==o)throw new TypeError("Invalid index");var s,a=r.slice(13,45);if(n===t.bip32.private){if(0!==r.readUInt8(45))throw new TypeError("Invalid private key");s=w(r.slice(46,78),a,t,i,o,u)}else s=g(r.slice(45,78),a,t,i,o,u);return s},m.fromPrivateKey=u,m.fromPublicKey=function(e,t,r){return g(e,t,r)},m.fromSeed=function(e,t){if(l(l.Buffer,e),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(64<e.length)throw new TypeError("Seed should be at most 512 bits");t=t||d;var r=f.hmacSHA512(c.from("Bitcoin seed","utf8"),e);return u(r.slice(0,32),r.slice(32),t)}}).call(this,S(10).Buffer)},1766:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(61),i=r(244);t.hash160=function(e){var t=n("sha256").update(e).digest();try{return n("rmd160").update(t).digest()}catch(e){return n("ripemd160").update(t).digest()}},t.hmacSHA512=function(e,t){return i("sha512",e).update(t).digest()}},1767:function(e,t,r){"use strict";var n=r(1768),u=r(12).Buffer;e.exports=function(i){function r(e){var t=e.slice(0,-4),r=e.slice(-4),n=i(t);if(!(r[0]^n[0]|r[1]^n[1]|r[2]^n[2]|r[3]^n[3]))return t}return{encode:function(e){var t=i(e);return n.encode(u.concat([e,t],e.length+4))},decode:function(e){var t=r(n.decode(e));if(!t)throw new Error("Invalid checksum");return t},decodeUnsafe:function(e){var t=n.decodeUnsafe(e);if(t)return r(t)}}}},1768:function(e,t,r){var n=r(1769);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1769:function(e,t,r){"use strict";var g=r(12).Buffer;e.exports=function(h){if(255<=h.length)throw new TypeError("Alphabet too long");for(var l=new Uint8Array(256),e=0;e<l.length;e++)l[e]=255;for(var t=0;t<h.length;t++){var r=h.charAt(t),n=r.charCodeAt(0);if(255!==l[n])throw new TypeError(r+" is ambiguous");l[n]=t}var d=h.length,v=h.charAt(0),y=Math.log(d)/Math.log(256),w=Math.log(256)/Math.log(d);function i(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return g.alloc(0);var t=0;if(" "!==e[t]){for(var r=0,n=0;e[t]===v;)r++,t++;for(var i=(e.length-t)*y+1>>>0,u=new Uint8Array(i);e[t];){var o=l[e.charCodeAt(t)];if(255===o)return;for(var s=0,a=i-1;(0!==o||s<n)&&-1!==a;a--,s++)o+=d*u[a]>>>0,u[a]=o%256>>>0,o=o/256>>>0;if(0!==o)throw new Error("Non-zero carry");n=s,t++}if(" "!==e[t]){for(var c=i-n;c!==i&&0===u[c];)c++;var f=g.allocUnsafe(r+(i-c));f.fill(0,0,r);for(var p=r;c!==i;)f[p++]=u[c++];return f}}}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=g.from(e)),!g.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var t=0,r=0,n=0,i=e.length;n!==i&&0===e[n];)n++,t++;for(var u=(i-n)*w+1>>>0,o=new Uint8Array(u);n!==i;){for(var s=e[n],a=0,c=u-1;(0!==s||a<r)&&-1!==c;c--,a++)s+=256*o[c]>>>0,o[c]=s%d>>>0,s=s/d>>>0;if(0!==s)throw new Error("Non-zero carry");r=a,n++}for(var f=u-r;f!==u&&0===o[f];)f++;for(var p=v.repeat(t);f<u;++f)p+=h.charAt(o[f]);return p},decodeUnsafe:i,decode:function(e){var t=i(e);if(t)return t;throw new Error("Non-base"+d+" character")}}}},1770:function(e,t,r){(function(a){var c=r(244),f=a.alloc(1,1),p=a.alloc(1,0);e.exports=function(e,t,r,n,i){var u=a.alloc(32,0),o=a.alloc(32,1),u=c("sha256",u).update(o).update(p).update(t).update(e).update(i||"").digest(),o=c("sha256",u).update(o).digest();u=c("sha256",u).update(o).update(f).update(t).update(e).update(i||"").digest(),o=c("sha256",u).update(o).digest();for(var s=o=c("sha256",u).update(o).digest();!n(s)||!r(s);)u=c("sha256",u).update(o).update(p).digest(),o=c("sha256",u).update(o).digest(),s=o=c("sha256",u).update(o).digest();return s}}).call(this,r(10).Buffer)},1771:function(l,e,d){(function(t){var u=d(1422),i=d(1495);function e(e){return t.isBuffer(e)}function r(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function n(t,r){var n=t.toJSON();function e(e){if(!t(e))return!1;if(e.length===r)return!0;throw i.tfCustomError(n+"(Length: "+r+")",n+"(Length: "+e.length+")")}return e.toJSON=function(){return n},e}var o,s=n.bind(null,u.Array),a=n.bind(null,e),c=n.bind(null,r),f=n.bind(null,u.String),p=Math.pow(2,53)-1,h={ArrayN:s,Buffer:e,BufferN:a,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:r,HexN:c,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&-p<=e&&e<=p&&Math.floor(e)===e},Range:function(r,n,i){function e(e,t){return i(e,t)&&r<e&&e<n}return i=i||u.Number,e.toJSON=function(){return"".concat(i.toJSON()," between [").concat(r,", ").concat(n,"]")},e},StringN:f,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&0<=e&&e<=p&&Math.floor(e)===e}};for(o in h)h[o].toJSON=function(e){return e}.bind(null,o);l.exports=h}).call(this,d(10).Buffer)},1772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1280),s=r(1266),a=r(1308),c=r(1270),f=s.OPS;t.p2data=function(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),c({network:c.maybe(c.Object),output:c.maybe(c.Buffer),data:c.maybe(c.arrayOf(c.Buffer))},e);var r,n,i={name:"embed",network:e.network||o.bitcoin};if(a.prop(i,"output",function(){if(e.data)return s.compile([f.OP_RETURN].concat(e.data))}),a.prop(i,"data",function(){if(e.output)return s.decompile(e.output).slice(1)}),t.validate&&e.output){var u=s.decompile(e.output);if(u[0]!==f.OP_RETURN)throw new TypeError("Output is invalid");if(!u.slice(1).every(c.Buffer))throw new TypeError("Output is invalid");if(e.data&&(r=e.data,n=i.data,r.length!==n.length||!r.every(function(e,t){return e.equals(n[t])})))throw new TypeError("Data mismatch")}return Object.assign(i,e)}},1773:function(e,t,r){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.decode=function(e,t,r){t=t||4,r=void 0===r||r;var n=e.length;if(0===n)return 0;if(t<n)throw new TypeError("Script number overflow");if(r&&0==(127&e[n-1])&&(n<=1||0==(128&e[n-2])))throw new Error("Non-minimally encoded script number");if(5===n){var i=e.readUInt32LE(0),u=e.readUInt8(4);return 128&u?-(4294967296*(-129&u)+i):4294967296*u+i}for(var o=0,s=0;s<n;++s)o|=e[s]<<8*s;return 128&e[n-1]?-(o&~(128<<8*(n-1))):o},t.encode=function(e){for(var t=Math.abs(e),r=2147483647<t?5:8388607<t?4:32767<t?3:127<t?2:0<t?1:0,n=o.allocUnsafe(r),i=e<0,u=0;u<r;++u)n.writeUInt8(255&t,u),t>>=8;return 128&n[r-1]?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}}).call(this,r(10).Buffer)},1774:function(e,t,n){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0});var s=n(1290),a=n(474),c=n(1270),r=o.alloc(1,0);function f(e){for(var t=0;0===e[t];)++t;return t===e.length?r:128&(e=e.slice(t))[0]?o.concat([r,e],1+e.length):e}function p(e){0===e[0]&&(e=e.slice(1));var t=o.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}t.decode=function(e){var t=e.readUInt8(e.length-1),r=-129&t;if(r<=0||4<=r)throw new Error("Invalid hashType "+t);var n=a.decode(e.slice(0,-1)),i=p(n.r),u=p(n.s);return{signature:o.concat([i,u],64),hashType:t}},t.encode=function(e,t){c({signature:s.BufferN(64),hashType:s.UInt8},{signature:e,hashType:t});var r=-129&t;if(r<=0||4<=r)throw new Error("Invalid hashType "+t);var n=o.allocUnsafe(1);n.writeUInt8(t,0);var i=f(e.slice(0,32)),u=f(e.slice(32,64));return o.concat([a.encode(i,u),n])}}).call(this,n(10).Buffer)},1775:function(e,t,r){var u=r(1369);function i(e){return e<u.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports={encodingLength:i,encode:function(e,t,r){var n=i(t);return 1===n?e.writeUInt8(t,r):2===n?(e.writeUInt8(u.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===n?(e.writeUInt8(u.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(u.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n},decode:function(e,t){var r,n,i=e.readUInt8(t);if(i<u.OP_PUSHDATA1)r=i,n=1;else if(i===u.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),n=2}else if(i===u.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),n=3}else{if(t+5>e.length)return null;if(i!==u.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),n=5}return{opcode:i,number:r,size:n}}}},1776:function(e,t,r){var n,i=r(1369),u={};for(n in i)u[i[n]]=n;e.exports=u},1777:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1280),a=r(1266),c=r(1308),f=a.OPS,p=r(1270),h=r(1296),l=f.OP_RESERVED;function d(e,r){return e.length===r.length&&e.every(function(e,t){return e.equals(r[t])})}t.p2ms=function(e,t){if(!(e.input||e.output||e.pubkeys&&void 0!==e.m||e.signatures))throw new TypeError("Not enough data");function r(e){return a.isCanonicalScriptSignature(e)||void 0!==(t.allowIncomplete&&e===f.OP_0)}t=Object.assign({validate:!0},t||{}),p({network:p.maybe(p.Object),m:p.maybe(p.Number),n:p.maybe(p.Number),output:p.maybe(p.Buffer),pubkeys:p.maybe(p.arrayOf(h.isPoint)),signatures:p.maybe(p.arrayOf(r)),input:p.maybe(p.Buffer)},e);var n={network:e.network||s.bitcoin},i=[],u=!1;function o(e){u||(u=!0,i=a.decompile(e),n.m=i[0]-l,n.n=i[i.length-2]-l,n.pubkeys=i.slice(1,-2))}if(c.prop(n,"output",function(){if(e.m&&n.n&&e.pubkeys)return a.compile([].concat(l+e.m,e.pubkeys,l+n.n,f.OP_CHECKMULTISIG))}),c.prop(n,"m",function(){if(n.output)return o(n.output),n.m}),c.prop(n,"n",function(){if(n.pubkeys)return n.pubkeys.length}),c.prop(n,"pubkeys",function(){if(e.output)return o(e.output),n.pubkeys}),c.prop(n,"signatures",function(){if(e.input)return a.decompile(e.input).slice(1)}),c.prop(n,"input",function(){if(e.signatures)return a.compile([f.OP_0].concat(e.signatures))}),c.prop(n,"witness",function(){if(n.input)return[]}),c.prop(n,"name",function(){if(n.m&&n.n)return"p2ms(".concat(n.m," of ").concat(n.n,")")}),t.validate){if(e.output){if(o(e.output),!p.Number(i[0]))throw new TypeError("Output is invalid");if(!p.Number(i[i.length-2]))throw new TypeError("Output is invalid");if(i[i.length-1]!==f.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(n.m<=0||16<n.n||n.m>n.n||n.n!==i.length-3)throw new TypeError("Output is invalid");if(!n.pubkeys.every(function(e){return h.isPoint(e)}))throw new TypeError("Output is invalid");if(void 0!==e.m&&e.m!==n.m)throw new TypeError("m mismatch");if(void 0!==e.n&&e.n!==n.n)throw new TypeError("n mismatch");if(e.pubkeys&&!d(e.pubkeys,n.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(n.n=e.pubkeys.length,n.n<n.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<n.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>n.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==f.OP_0)throw new TypeError("Input is invalid");if(0===n.signatures.length||!n.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!d(e.signatures,n.signatures))throw new TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(n,e)}},1778:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1280),u=r(1266),o=r(1308),s=r(1270),a=u.OPS,c=r(1296);t.p2pk=function(e,t){if(!(e.input||e.output||e.pubkey||e.input||e.signature))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),s({network:s.maybe(s.Object),output:s.maybe(s.Buffer),pubkey:s.maybe(c.isPoint),signature:s.maybe(u.isCanonicalScriptSignature),input:s.maybe(s.Buffer)},e);var r=o.value(function(){return u.decompile(e.input)}),n={name:"p2pk",network:e.network||i.bitcoin};if(o.prop(n,"output",function(){if(e.pubkey)return u.compile([e.pubkey,a.OP_CHECKSIG])}),o.prop(n,"pubkey",function(){if(e.output)return e.output.slice(1,-1)}),o.prop(n,"signature",function(){if(e.input)return r()[0]}),o.prop(n,"input",function(){if(e.signature)return u.compile([e.signature])}),o.prop(n,"witness",function(){if(n.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==a.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!c.isPoint(n.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(n.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(n.input))throw new TypeError("Signature mismatch");if(e.input){if(1!==r().length)throw new TypeError("Input is invalid");if(!u.isCanonicalScriptSignature(n.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(n,e)}},1779:function(e,t,r){"use strict";(function(p){Object.defineProperty(t,"__esModule",{value:!0});var h=r(1292),l=r(1280),d=r(1266),v=r(1308),y=r(1270),w=d.OPS,g=r(1296),m=r(1342);t.p2pkh=function(t,e){if(!(t.address||t.hash||t.output||t.pubkey||t.input))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),y({network:y.maybe(y.Object),address:y.maybe(y.String),hash:y.maybe(y.BufferN(20)),output:y.maybe(y.BufferN(25)),pubkey:y.maybe(g.isPoint),signature:y.maybe(d.isCanonicalScriptSignature),input:y.maybe(y.Buffer)},t);var r=v.value(function(){var e=m.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}}),n=v.value(function(){return d.decompile(t.input)}),i=t.network||l.bitcoin,u={name:"p2pkh",network:i};if(v.prop(u,"address",function(){if(u.hash){var e=p.allocUnsafe(21);return e.writeUInt8(i.pubKeyHash,0),u.hash.copy(e,1),m.encode(e)}}),v.prop(u,"hash",function(){return t.output?t.output.slice(3,23):t.address?r().hash:t.pubkey||u.pubkey?h.hash160(t.pubkey||u.pubkey):void 0}),v.prop(u,"output",function(){if(u.hash)return d.compile([w.OP_DUP,w.OP_HASH160,u.hash,w.OP_EQUALVERIFY,w.OP_CHECKSIG])}),v.prop(u,"pubkey",function(){if(t.input)return n()[1]}),v.prop(u,"signature",function(){if(t.input)return n()[0]}),v.prop(u,"input",function(){if(t.pubkey&&t.signature)return d.compile([t.signature,t.pubkey])}),v.prop(u,"witness",function(){if(u.input)return[]}),e.validate){var o=p.from([]);if(t.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(20!==r().hash.length)throw new TypeError("Invalid address");o=r().hash}if(t.hash){if(0<o.length&&!o.equals(t.hash))throw new TypeError("Hash mismatch");o=t.hash}if(t.output){if(25!==t.output.length||t.output[0]!==w.OP_DUP||t.output[1]!==w.OP_HASH160||20!==t.output[2]||t.output[23]!==w.OP_EQUALVERIFY||t.output[24]!==w.OP_CHECKSIG)throw new TypeError("Output is invalid");var s=t.output.slice(3,23);if(0<o.length&&!o.equals(s))throw new TypeError("Hash mismatch");o=s}if(t.pubkey){var a=h.hash160(t.pubkey);if(0<o.length&&!o.equals(a))throw new TypeError("Hash mismatch");o=a}if(t.input){var c=n();if(2!==c.length)throw new TypeError("Input is invalid");if(!d.isCanonicalScriptSignature(c[0]))throw new TypeError("Input has invalid signature");if(!g.isPoint(c[1]))throw new TypeError("Input has invalid pubkey");if(t.signature&&!t.signature.equals(c[0]))throw new TypeError("Signature mismatch");if(t.pubkey&&!t.pubkey.equals(c[1]))throw new TypeError("Pubkey mismatch");var f=h.hash160(c[1]);if(0<o.length&&!o.equals(f))throw new TypeError("Hash mismatch")}}return Object.assign(u,t)}}).call(this,r(10).Buffer)},1780:function(e,t,r){"use strict";(function(d){Object.defineProperty(t,"__esModule",{value:!0});var v=r(1292),y=r(1280),w=r(1266),g=r(1308),m=r(1270),S=w.OPS,b=r(1342);t.p2sh=function(t,e){if(!(t.address||t.hash||t.output||t.redeem||t.input))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),m({network:m.maybe(m.Object),address:m.maybe(m.String),hash:m.maybe(m.BufferN(20)),output:m.maybe(m.BufferN(23)),redeem:m.maybe({network:m.maybe(m.Object),output:m.maybe(m.Buffer),input:m.maybe(m.Buffer),witness:m.maybe(m.arrayOf(m.Buffer))}),input:m.maybe(m.Buffer),witness:m.maybe(m.arrayOf(m.Buffer))},t);var r,n,i=t.network,u={network:i=i||(t.redeem&&t.redeem.network||y.bitcoin)},o=g.value(function(){var e=b.decode(t.address);return{version:e.readUInt8(0),hash:e.slice(1)}}),s=g.value(function(){return w.decompile(t.input)}),a=g.value(function(){var e=s();return{network:i,output:e[e.length-1],input:w.compile(e.slice(0,-1)),witness:t.witness||[]}});if(g.prop(u,"address",function(){if(u.hash){var e=d.allocUnsafe(21);return e.writeUInt8(u.network.scriptHash,0),u.hash.copy(e,1),b.encode(e)}}),g.prop(u,"hash",function(){return t.output?t.output.slice(2,22):t.address?o().hash:u.redeem&&u.redeem.output?v.hash160(u.redeem.output):void 0}),g.prop(u,"output",function(){if(u.hash)return w.compile([S.OP_HASH160,u.hash,S.OP_EQUAL])}),g.prop(u,"redeem",function(){if(t.input)return a()}),g.prop(u,"input",function(){if(t.redeem&&t.redeem.input&&t.redeem.output)return w.compile([].concat(w.decompile(t.redeem.input),t.redeem.output))}),g.prop(u,"witness",function(){return u.redeem&&u.redeem.witness?u.redeem.witness:u.input?[]:void 0}),g.prop(u,"name",function(){var e=["p2sh"];return void 0!==u.redeem&&e.push(u.redeem.name),e.join("-")}),e.validate){var c=d.from([]);if(t.address){if(o().version!==i.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(20!==o().hash.length)throw new TypeError("Invalid address");c=o().hash}if(t.hash){if(0<c.length&&!c.equals(t.hash))throw new TypeError("Hash mismatch");c=t.hash}if(t.output){if(23!==t.output.length||t.output[0]!==S.OP_HASH160||20!==t.output[1]||t.output[22]!==S.OP_EQUAL)throw new TypeError("Output is invalid");var f=t.output.slice(2,22);if(0<c.length&&!c.equals(f))throw new TypeError("Hash mismatch");c=f}var p=function(e){if(e.output){var t=w.decompile(e.output);if(!t||t.length<1)throw new TypeError("Redeem.output too short");var r=v.hash160(e.output);if(0<c.length&&!c.equals(r))throw new TypeError("Hash mismatch");c=r}if(e.input){var n=0<e.input.length,i=e.witness&&0<e.witness.length;if(!n&&!i)throw new TypeError("Empty input");if(n&&i)throw new TypeError("Input and witness provided");if(n){var u=w.decompile(e.input);if(!w.isPushOnly(u))throw new TypeError("Non push-only scriptSig")}}};if(t.input){var h=s();if(!h||h.length<1)throw new TypeError("Input too short");if(!d.isBuffer(a().output))throw new TypeError("Input is invalid");p(a())}if(t.redeem){if(t.redeem.network&&t.redeem.network!==i)throw new TypeError("Network mismatch");if(t.input){var l=a();if(t.redeem.output&&!t.redeem.output.equals(l.output))throw new TypeError("Redeem.output mismatch");if(t.redeem.input&&!t.redeem.input.equals(l.input))throw new TypeError("Redeem.input mismatch")}p(t.redeem)}if(t.witness&&t.redeem&&t.redeem.witness&&(r=t.redeem.witness,n=t.witness,r.length!==n.length||!r.every(function(e,t){return e.equals(n[t])})))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(u,t)}}).call(this,r(10).Buffer)},1781:function(e,t,r){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0});var c=r(1292),f=r(1280),p=r(1266),h=r(1308),l=r(1270),d=p.OPS,v=r(1296),y=r(1424),w=a.alloc(0);t.p2wpkh=function(n,e){if(!(n.address||n.hash||n.output||n.pubkey||n.witness))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),l({address:l.maybe(l.String),hash:l.maybe(l.BufferN(20)),input:l.maybe(l.BufferN(0)),network:l.maybe(l.Object),output:l.maybe(l.BufferN(22)),pubkey:l.maybe(v.isPoint),signature:l.maybe(p.isCanonicalScriptSignature),witness:l.maybe(l.arrayOf(l.Buffer))},n);var t=h.value(function(){var e=y.decode(n.address),t=e.words.shift(),r=y.fromWords(e.words);return{version:t,prefix:e.prefix,data:a.from(r)}}),r=n.network||f.bitcoin,i={name:"p2wpkh",network:r};if(h.prop(i,"address",function(){if(i.hash){var e=y.toWords(i.hash);return e.unshift(0),y.encode(r.bech32,e)}}),h.prop(i,"hash",function(){return n.output?n.output.slice(2,22):n.address?t().data:n.pubkey||i.pubkey?c.hash160(n.pubkey||i.pubkey):void 0}),h.prop(i,"output",function(){if(i.hash)return p.compile([d.OP_0,i.hash])}),h.prop(i,"pubkey",function(){return n.pubkey?n.pubkey:n.witness?n.witness[1]:void 0}),h.prop(i,"signature",function(){if(n.witness)return n.witness[0]}),h.prop(i,"input",function(){if(i.witness)return w}),h.prop(i,"witness",function(){if(n.pubkey&&n.signature)return[n.signature,n.pubkey]}),e.validate){var u=a.from([]);if(n.address){if(r&&r.bech32!==t().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(0!==t().version)throw new TypeError("Invalid address version");if(20!==t().data.length)throw new TypeError("Invalid address data");u=t().data}if(n.hash){if(0<u.length&&!u.equals(n.hash))throw new TypeError("Hash mismatch");u=n.hash}if(n.output){if(22!==n.output.length||n.output[0]!==d.OP_0||20!==n.output[1])throw new TypeError("Output is invalid");if(0<u.length&&!u.equals(n.output.slice(2)))throw new TypeError("Hash mismatch");u=n.output.slice(2)}if(n.pubkey){var o=c.hash160(n.pubkey);if(0<u.length&&!u.equals(o))throw new TypeError("Hash mismatch");if(u=o,!v.isPoint(n.pubkey)||33!==n.pubkey.length)throw new TypeError("Invalid pubkey for p2wpkh")}if(n.witness){if(2!==n.witness.length)throw new TypeError("Witness is invalid");if(!p.isCanonicalScriptSignature(n.witness[0]))throw new TypeError("Witness has invalid signature");if(!v.isPoint(n.witness[1])||33!==n.witness[1].length)throw new TypeError("Witness has invalid pubkey");if(n.signature&&!n.signature.equals(n.witness[0]))throw new TypeError("Signature mismatch");if(n.pubkey&&!n.pubkey.equals(n.witness[1]))throw new TypeError("Pubkey mismatch");var s=c.hash160(n.witness[1]);if(0<u.length&&!u.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,n)}}).call(this,r(10).Buffer)},1782:function(e,r,n){"use strict";(function(h){Object.defineProperty(r,"__esModule",{value:!0});var l=n(1292),d=n(1280),v=n(1266),y=n(1308),w=n(1270),g=v.OPS,t=n(1296),m=n(1424),S=h.alloc(0);function b(e){return!(!h.isBuffer(e)||65!==e.length||4!==e[0]||!t.isPoint(e))}r.p2wsh=function(n,e){if(!(n.address||n.hash||n.output||n.redeem||n.witness))throw new TypeError("Not enough data");e=Object.assign({validate:!0},e||{}),w({network:w.maybe(w.Object),address:w.maybe(w.String),hash:w.maybe(w.BufferN(32)),output:w.maybe(w.BufferN(34)),redeem:w.maybe({input:w.maybe(w.Buffer),network:w.maybe(w.Object),output:w.maybe(w.Buffer),witness:w.maybe(w.arrayOf(w.Buffer))}),input:w.maybe(w.BufferN(0)),witness:w.maybe(w.arrayOf(w.Buffer))},n);var t,r,i=y.value(function(){var e=m.decode(n.address),t=e.words.shift(),r=m.fromWords(e.words);return{version:t,prefix:e.prefix,data:h.from(r)}}),u=y.value(function(){return v.decompile(n.redeem.input)}),o=n.network,s={network:o=o||(n.redeem&&n.redeem.network||d.bitcoin)};if(y.prop(s,"address",function(){if(s.hash){var e=m.toWords(s.hash);return e.unshift(0),m.encode(o.bech32,e)}}),y.prop(s,"hash",function(){return n.output?n.output.slice(2):n.address?i().data:s.redeem&&s.redeem.output?l.sha256(s.redeem.output):void 0}),y.prop(s,"output",function(){if(s.hash)return v.compile([g.OP_0,s.hash])}),y.prop(s,"redeem",function(){if(n.witness)return{output:n.witness[n.witness.length-1],input:S,witness:n.witness.slice(0,-1)}}),y.prop(s,"input",function(){if(s.witness)return S}),y.prop(s,"witness",function(){if(n.redeem&&n.redeem.input&&0<n.redeem.input.length&&n.redeem.output&&0<n.redeem.output.length){var e=v.toStack(u());return s.redeem=Object.assign({witness:e},n.redeem),s.redeem.input=S,[].concat(e,n.redeem.output)}if(n.redeem&&n.redeem.output&&n.redeem.witness)return[].concat(n.redeem.witness,n.redeem.output)}),y.prop(s,"name",function(){var e=["p2wsh"];return void 0!==s.redeem&&e.push(s.redeem.name),e.join("-")}),e.validate){var a=h.from([]);if(n.address){if(i().prefix!==o.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(0!==i().version)throw new TypeError("Invalid address version");if(32!==i().data.length)throw new TypeError("Invalid address data");a=i().data}if(n.hash){if(0<a.length&&!a.equals(n.hash))throw new TypeError("Hash mismatch");a=n.hash}if(n.output){if(34!==n.output.length||n.output[0]!==g.OP_0||32!==n.output[1])throw new TypeError("Output is invalid");var c=n.output.slice(2);if(0<a.length&&!a.equals(c))throw new TypeError("Hash mismatch");a=c}if(n.redeem){if(n.redeem.network&&n.redeem.network!==o)throw new TypeError("Network mismatch");if(n.redeem.input&&0<n.redeem.input.length&&n.redeem.witness&&0<n.redeem.witness.length)throw new TypeError("Ambiguous witness source");if(n.redeem.output){if(0===v.decompile(n.redeem.output).length)throw new TypeError("Redeem.output is invalid");var f=l.sha256(n.redeem.output);if(0<a.length&&!a.equals(f))throw new TypeError("Hash mismatch");a=f}if(n.redeem.input&&!v.isPushOnly(u()))throw new TypeError("Non push-only scriptSig");if(n.witness&&n.redeem.witness&&(t=n.witness,r=n.redeem.witness,t.length!==r.length||!t.every(function(e,t){return e.equals(r[t])})))throw new TypeError("Witness and redeem.witness mismatch");if(n.redeem.input&&u().some(b)||n.redeem.output&&(v.decompile(n.redeem.output)||[]).some(b))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(n.witness&&0<n.witness.length){var p=n.witness[n.witness.length-1];if(n.redeem&&n.redeem.output&&!n.redeem.output.equals(p))throw new TypeError("Witness and redeem.output mismatch");if(n.witness.some(b)||(v.decompile(p)||[]).some(b))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(s,n)}}).call(this,n(10).Buffer)},1783:function(e,n,y){"use strict";(function(i){var e=y(135),t=y(136);Object.defineProperty(n,"__esModule",{value:!0});var a=y(1370),u=y(1292),c=y(1371),o=y(1290),s=y(1784),f=y(1270),p=y(1426),h=new TypeError("Cannot compute merkle root for zero transactions"),l=new TypeError("Cannot compute witness commit for non-segwit block"),r=(t(d,[{key:"getWitnessCommit",value:function(){if(!v(this.transactions))return null;var e=this.transactions[0].outs.filter(function(e){return e.script.slice(0,6).equals(i.from("6a24aa21a9ed","hex"))}).map(function(e){return e.script.slice(6,38)});if(0===e.length)return null;var t=e[e.length-1];return t instanceof i&&32===t.length?t:null}},{key:"hasWitnessCommit",value:function(){return this.witnessCommit instanceof i&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}},{key:"hasWitness",value:function(){return(e=this.transactions)instanceof Array&&e.some(function(e){return"object"==typeof e&&e.ins instanceof Array&&e.ins.some(function(e){return"object"==typeof e&&e.witness instanceof Array&&0<e.witness.length})});var e}},{key:"weight",value:function(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}},{key:"byteLength",value:function(e){var r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e||!this.transactions?80:80+p.encodingLength(this.transactions.length)+this.transactions.reduce(function(e,t){return e+t.byteLength(r)},0)}},{key:"getHash",value:function(){return u.hash256(this.toBuffer(!0))}},{key:"getId",value:function(){return a.reverseBuffer(this.getHash()).toString("hex")}},{key:"getUTCDate",value:function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e}},{key:"toBuffer",value:function(e){var r=i.allocUnsafe(this.byteLength(e)),n=new a.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),e||!this.transactions||(p.encode(this.transactions.length,r,n.offset),n.offset+=p.encode.bytes,this.transactions.forEach(function(e){var t=e.byteLength();e.toBuffer(r,n.offset),n.offset+=t})),r}},{key:"toHex",value:function(e){return this.toBuffer(e).toString("hex")}},{key:"checkTxRoots",value:function(){var e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}},{key:"checkProofOfWork",value:function(){var e=a.reverseBuffer(this.getHash()),t=d.calculateTarget(this.bits);return e.compare(t)<=0}},{key:"__checkMerkleRoot",value:function(){if(!this.transactions)throw h;var e=d.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}},{key:"__checkWitnessCommit",value:function(){if(!this.transactions)throw h;if(!this.hasWitnessCommit())throw l;var e=d.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}],[{key:"fromBuffer",value:function(e){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var t=new a.BufferReader(e),r=new d;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;var n=t.readVarInt();r.transactions=[];for(var i,u=0;u<n;++u){var o=(i=void 0,i=c.Transaction.fromBuffer(t.buffer.slice(t.offset),!0),t.offset+=i.byteLength(),i);r.transactions.push(o)}var s=r.getWitnessCommit();return s&&(r.witnessCommit=s),r}},{key:"fromHex",value:function(e){return d.fromBuffer(i.from(e,"hex"))}},{key:"calculateTarget",value:function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,n=i.alloc(32,0);return n.writeUIntBE(r,29-t,3),n}},{key:"calculateMerkleRoot",value:function(e,t){if(f([{getHash:o.Function}],e),0===e.length)throw h;if(t&&!v(e))throw l;var r=e.map(function(e){return e.getHash(t)}),n=s(r,u.hash256);return t?u.hash256(i.concat([n,e[0].ins[0].witness[0]])):n}}]),d);function d(){e(this,d),this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}function v(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&0<e[0].ins[0].witness.length}n.Block=r}).call(this,y(10).Buffer)},1784:function(e,t,r){(function(c){e.exports=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,n=e.concat();1<r;){for(var i=0,u=0;u<r;u+=2,++i){var o=n[u],s=u+1===r?o:n[u+1],a=c.concat([o,s]);n[i]=t(a)}r=i}return n[0]}}).call(this,r(10).Buffer)},1785:function(e,Y,J){"use strict";(function(E){var f=J(1286),w=J(140),i=J(418),n=J(135),e=J(136);Object.defineProperty(Y,"__esModule",{value:!0});var u=J(1786),_=J(1372),p=J(1498),o=J(1423),s=J(1370),a=J(1292),g=J(1425),t=J(1280),k=J(1368),m=J(1266),S=J(1371),c={network:t.bitcoin,maximumFeeRate:5e3},r=(e(h,[{key:"combine",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.data).combine.apply(e,i(r.map(function(e){return e.data}))),this}},{key:"clone",value:function(){var e=h.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}},{key:"setMaximumFeeRate",value:function(e){U(e),this.opts.maximumFeeRate=e}},{key:"setVersion",value:function(e){U(e),H(this.data.inputs,"setVersion");var t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}},{key:"setLocktime",value:function(e){U(e),H(this.data.inputs,"setLocktime");var t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}},{key:"setInputSequence",value:function(e,t){U(t),H(this.data.inputs,"setInputSequence");var r=this.__CACHE;if(r.__TX.ins.length<=e)throw new Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}},{key:"addInputs",value:function(e){var t=this;return e.forEach(function(e){return t.addInput(e)}),this}},{key:"addInput",value:function(e){if(1<arguments.length||!e||void 0===e.hash||void 0===e.index)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");H(this.data.inputs,"addInput");var t=this.__CACHE;this.data.addInput(e),B(t,t.__TX.ins[t.__TX.ins.length-1]);var r=this.data.inputs.length-1,n=this.data.inputs[r];return n.nonWitnessUtxo&&F(this.__CACHE,n,r),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}},{key:"addOutputs",value:function(e){var t=this;return e.forEach(function(e){return t.addOutput(e)}),this}},{key:"addOutput",value:function(e){if(1<arguments.length||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");H(this.data.inputs,"addOutput");var t,r,n=e.address;"string"==typeof n&&(t=this.opts.network,r=o.toOutputScript(n,t),e=Object.assign(e,{script:r}));var i=this.__CACHE;return this.data.addOutput(e),i.__FEE=void 0,i.__FEE_RATE=void 0,i.__EXTRACTED_TX=void 0,this}},{key:"extractTransaction",value:function(e){if(!this.data.inputs.every(y))throw new Error("Not finalized");var t=this.__CACHE;if(e||function(e,t,r){var n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),u=n*i;if(n>=r.maximumFeeRate)throw new Error("Warning: You are paying around ".concat((u/1e8).toFixed(8)," in ")+"fees, which is ".concat(n," satoshi per byte for a transaction ")+"with a VSize of ".concat(i," bytes (segwit counted as 0.25 byte per ")+"byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.")}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;var r=t.__TX.clone();return G(this.data.inputs,r,t,!0),r}},{key:"getFeeRate",value:function(){return K("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}},{key:"getFee",value:function(){return K("__FEE","fee",this.data.inputs,this.__CACHE)}},{key:"finalizeAllInputs",value:function(){var t=this;return p.checkForInput(this.data.inputs,0),q(this.data.inputs.length).forEach(function(e){return t.finalizeInput(e)}),this}},{key:"finalizeInput",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:M,r=p.checkForInput(this.data.inputs,e),n=function(e,t,r){var n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};{var u,o;i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript?i.script=t.witnessScript:t.redeemScript?i.script=t.redeemScript:t.nonWitnessUtxo?(u=X(r,t,e),o=n.ins[e].index,i.script=u.outs[o].script):t.witnessUtxo&&(i.script=t.witnessUtxo.script)}return(t.witnessScript||N(i.script))&&(i.isSegwit=!0),i}(e,r,this.__CACHE),i=n.script,u=n.isP2SH,o=n.isP2WSH,s=n.isSegwit;if(!i)throw new Error("No script found for input #".concat(e));!function(e){{var t,r;e.sighashType&&e.partialSig&&(t=e.partialSig,r=e.sighashType,t.forEach(function(e){var t=m.signature.decode(e.signature).hashType;if(r!==t)throw new Error("Signature sighash does not match input sighash type")}))}}(r);var a=t(e,r,i,s,u,o),c=a.finalScriptSig,f=a.finalScriptWitness;if(c&&this.data.updateInput(e,{finalScriptSig:c}),f&&this.data.updateInput(e,{finalScriptWitness:f}),!c&&!f)throw new Error("Unknown error finalizing input #".concat(e));return this.data.clearFinalizedInput(e),this}},{key:"validateSignaturesOfAllInputs",value:function(){var t=this;return p.checkForInput(this.data.inputs,0),q(this.data.inputs.length).map(function(e){return t.validateSignaturesOfInput(e)}).reduce(function(e,t){return!0===t&&e},!0)}},{key:"validateSignaturesOfInput",value:function(e,t){var r=this.data.inputs[e],n=(r||{}).partialSig;if(!r||!n||n.length<1)throw new Error("No signatures to validate");var i=t?n.filter(function(e){return e.pubkey.equals(t)}):n;if(i.length<1)throw new Error("No signatures for this pubkey");var u,o=[],s=w(i);try{for(s.s();!(u=s.n()).done;){var a=u.value,c=m.signature.decode(a.signature),f=l!==c.hashType?V(e,Object.assign({},r,{sighashType:c.hashType}),this.__CACHE):{hash:d,script:v},p=f.hash,h=f.script,l=c.hashType,d=p,v=h;x(a.pubkey,h,"verify");var y=g.fromPublicKey(a.pubkey);o.push(y.verify(p,c.signature))}}catch(e){s.e(e)}finally{s.f()}return o.every(function(e){return!0===e})}},{key:"signAllInputsHD",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[S.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");var r,n=[],i=w(q(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var u=r.value;try{this.signInputHD(u,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every(function(e){return!1===e}))throw new Error("No inputs were signed");return this}},{key:"signAllInputsHDAsync",value:function(s){var a=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[S.Transaction.SIGHASH_ALL];return new Promise(function(e,t){if(!s||!s.publicKey||!s.fingerprint)return t(new Error("Need HDSigner to sign input"));var r,n=[],i=[],u=w(q(a.data.inputs.length));try{for(u.s();!(r=u.n()).done;){var o=r.value;i.push(a.signInputHDAsync(o,s,c).then(function(){n.push(!0)},function(){n.push(!1)}))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(i).then(function(){return n.every(function(e){return!1===e})?t(new Error("No inputs were signed")):void e()})})}},{key:"signInputHD",value:function(t,e){var r=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[S.Transaction.SIGHASH_ALL];if(!e||!e.publicKey||!e.fingerprint)throw new Error("Need HDSigner to sign input");return W(t,this.data.inputs,e).forEach(function(e){return r.signInput(t,e,n)}),this}},{key:"signInputHDAsync",value:function(n,i){var u=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[S.Transaction.SIGHASH_ALL];return new Promise(function(e,t){if(!i||!i.publicKey||!i.fingerprint)return t(new Error("Need HDSigner to sign input"));var r=W(n,u.data.inputs,i).map(function(e){return u.signInputAsync(n,e,o)});return Promise.all(r).then(function(){e()}).catch(t)})}},{key:"signAllInputs",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[S.Transaction.SIGHASH_ALL];if(!e||!e.publicKey)throw new Error("Need Signer to sign input");var r,n=[],i=w(q(this.data.inputs.length));try{for(i.s();!(r=i.n()).done;){var u=r.value;try{this.signInput(u,e,t),n.push(!0)}catch(e){n.push(!1)}}}catch(e){i.e(e)}finally{i.f()}if(n.every(function(e){return!1===e}))throw new Error("No inputs were signed");return this}},{key:"signAllInputsAsync",value:function(s){var a=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[S.Transaction.SIGHASH_ALL];return new Promise(function(e,t){if(!s||!s.publicKey)return t(new Error("Need Signer to sign input"));var r,n=[],i=[],u=w(a.data.inputs.entries());try{for(u.s();!(r=u.n()).done;){var o=f(r.value,1)[0];i.push(a.signInputAsync(o,s,c).then(function(){n.push(!0)},function(){n.push(!1)}))}}catch(e){u.e(e)}finally{u.f()}return Promise.all(i).then(function(){return n.every(function(e){return!1===e})?t(new Error("No inputs were signed")):void e()})})}},{key:"signInput",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[S.Transaction.SIGHASH_ALL];if(!t||!t.publicKey)throw new Error("Need Signer to sign input");var n=D(this.data.inputs,e,t.publicKey,this.__CACHE,r),i=n.hash,u=n.sighashType,o=[{pubkey:t.publicKey,signature:m.signature.encode(t.sign(i),u)}];return this.data.updateInput(e,{partialSig:o}),this}},{key:"signInputAsync",value:function(n,i){var u=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[S.Transaction.SIGHASH_ALL];return Promise.resolve().then(function(){if(!i||!i.publicKey)throw new Error("Need Signer to sign input");var e=D(u.data.inputs,n,i.publicKey,u.__CACHE,o),t=e.hash,r=e.sighashType;return Promise.resolve(i.sign(t)).then(function(e){var t=[{pubkey:i.publicKey,signature:m.signature.encode(e,r)}];u.data.updateInput(n,{partialSig:t})})})}},{key:"toBuffer",value:function(){return this.data.toBuffer()}},{key:"toHex",value:function(){return this.data.toHex()}},{key:"toBase64",value:function(){return this.data.toBase64()}},{key:"updateGlobal",value:function(e){return this.data.updateGlobal(e),this}},{key:"updateInput",value:function(e,t){return this.data.updateInput(e,t),t.nonWitnessUtxo&&F(this.__CACHE,this.data.inputs[e],e),this}},{key:"updateOutput",value:function(e,t){return this.data.updateOutput(e,t),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return this.data.addUnknownKeyValToGlobal(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){return this.data.addUnknownKeyValToInput(e,t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}},{key:"clearFinalizedInput",value:function(e){return this.data.clearFinalizedInput(e),this}},{key:"inputCount",get:function(){return this.data.inputs.length}},{key:"version",get:function(){return this.__CACHE.__TX.version},set:function(e){this.setVersion(e)}},{key:"locktime",get:function(){return this.__CACHE.__TX.locktime},set:function(e){this.setLocktime(e)}},{key:"txInputs",get:function(){return this.__CACHE.__TX.ins.map(function(e){return{hash:s.cloneBuffer(e.hash),index:e.index,sequence:e.sequence}})}},{key:"txOutputs",get:function(){var r=this;return this.__CACHE.__TX.outs.map(function(e){var t;try{t=o.fromOutputScript(e.script,r.opts.network)}catch(e){}return{script:s.cloneBuffer(e.script),value:e.value,address:t}})}}],[{key:"fromBase64",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=E.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=E.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(e){var t,r,n=new h(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u.Psbt.fromBuffer(e,l));return t=n.__CACHE.__TX,r=n.__CACHE,t.ins.forEach(function(e){B(r,e)}),n}}]),h);function h(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new u.Psbt(new d);n(this,h),this.data=t,this.opts=Object.assign({},c,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx},0===this.data.inputs.length&&this.setVersion(2);function r(e,t,r,n){return Object.defineProperty(e,t,{enumerable:r,writable:n})}r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}Y.Psbt=r;var l=function(e){return new d(e)},d=(e(v,[{key:"getInputOutputCounts",value:function(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}},{key:"addInput",value:function(e){if(void 0===e.hash||void 0===e.index||!E.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw new Error("Error adding input.");var t="string"==typeof e.hash?s.reverseBuffer(E.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}},{key:"addOutput",value:function(e){if(void 0===e.script||void 0===e.value||!E.isBuffer(e.script)||"number"!=typeof e.value)throw new Error("Error adding output.");this.tx.addOutput(e.script,e.value)}},{key:"toBuffer",value:function(){return this.tx.toBuffer()}}]),v);function v(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:E.from([2,0,0,0,0,0,0,0,0,0]);n(this,v),this.tx=S.Transaction.fromBuffer(e),function(e){if(!e.ins.every(function(e){return e.script&&0===e.script.length&&e.witness&&0===e.witness.length}))throw new Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}function T(e,r,t){if(r){var n;if((n=t?t.map(function(e){var t=g.fromPublicKey(e,{compressed:!0}).publicKey;return r.find(function(e){return e.pubkey.equals(t)})}).filter(function(e){return!!e}):r).length>e)throw new Error("Too many signatures");return n.length===e}}function y(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function b(t){return function(e){try{return t({output:e}),!0}catch(e){return!1}}}var O=b(k.p2ms),I=b(k.p2pk),P=b(k.p2pkh),N=b(k.p2wpkh),A=b(k.p2wsh);function U(e){if("number"!=typeof e||e!==Math.floor(e)||4294967295<e||e<0)throw new Error("Invalid 32 bit integer")}function H(e,o){e.forEach(function(e){var t,r,n,i=!1,u=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return;r=(t=e).finalScriptSig&&m.decompile(t.finalScriptSig)||[],n=t.finalScriptWitness&&m.decompile(t.finalScriptWitness)||[],u=r.concat(n).filter(function(e){return E.isBuffer(e)&&m.isCanonicalScriptSignature(e)}).map(function(e){return{signature:e}})}else u=e.partialSig;if(u.forEach(function(e){var t=m.signature.decode(e.signature).hashType,r=[];switch(t&S.Transaction.SIGHASH_ANYONECANPAY&&r.push("addInput"),31&t){case S.Transaction.SIGHASH_ALL:break;case S.Transaction.SIGHASH_SINGLE:case S.Transaction.SIGHASH_NONE:r.push("addOutput"),r.push("setInputSequence")}-1===r.indexOf(o)&&(i=!0)}),i)throw new Error("Can not modify transaction, signatures exist.")})}function x(t,e,r){var n=a.hash160(t),i=m.decompile(e);if(null===i)throw new Error("Unknown script error");if(!i.some(function(e){return"number"!=typeof e&&(e.equals(t)||e.equals(n))}))throw new Error("Can not ".concat(r," for this input with the key ").concat(t.toString("hex")))}function B(e,t){var r=s.reverseBuffer(E.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function C(i,u){return function(e,t,r){var n=i({redeem:{output:r}}).output;if(!t.equals(n))throw new Error("".concat(u," for input #").concat(e," doesn't match the scriptPubKey in the prevout"))}}var R=C(k.p2sh,"Redeem script"),L=C(k.p2wsh,"Witness script");function K(e,t,r,n){if(!r.every(y))throw new Error("PSBT must be finalized to calculate ".concat(t));if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;var i,u=!0;return n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,u=!1):i=n.__TX.clone(),G(r,i,n,u),"__FEE_RATE"===e?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function M(e,t,r,n,i,u){var o,s,a,c,f,p,h,l,d,v,y,w,g,m,S=N(o=r)?"witnesspubkeyhash":P(o)?"pubkeyhash":O(o)?"multisig":I(o)?"pubkey":"nonstandard";if(!function(e,t){switch(S){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return T(1,e.partialSig);case"multisig":var r=k.p2ms({output:t});return T(r.m,e.partialSig,r.pubkeys);default:return}}(t,r))throw new Error("Can not finalize input #".concat(e));return s=S,a=t.partialSig,c=n,f=i,p=u,w=function(e,t){var r;switch(s){case"multisig":var n=(r=t,k.p2ms({output:e}).pubkeys.map(function(t){return(r.filter(function(e){return e.pubkey.equals(t)})[0]||{}).signature}).filter(function(e){return!!e})),i=k.p2ms({output:e,signatures:n});break;case"pubkey":i=k.p2pk({output:e,signature:t[0].signature});break;case"pubkeyhash":i=k.p2pkh({output:e,pubkey:t[0].pubkey,signature:t[0].signature});break;case"witnesspubkeyhash":i=k.p2wpkh({output:e,pubkey:t[0].pubkey,signature:t[0].signature})}return i}(r,a),g=p?k.p2wsh({redeem:w}):null,m=f?k.p2sh({redeem:g||w}):null,c?(d=g?g.witness:w.witness,y=E.allocUnsafe(0),b((v=d).length),v.forEach(function(e){b(e.length),y=E.concat([y,E.from(e)])}),l=y,m&&(h=m.input)):h=m?m.input:w.input,{finalScriptSig:h,finalScriptWitness:l};function b(e){var t=y.length,r=_.encodingLength(e);y=E.concat([y,E.allocUnsafe(r)]),_.encode(e,y,t)}}function D(e,t,r,n,i){var u=V(t,p.checkForInput(e,t),n,i),o=u.hash,s=u.sighashType;return x(r,u.script,"sign"),{hash:o,sighashType:s}}function V(e,t,r,n){var i=r.__TX,u=t.sighashType||S.Transaction.SIGHASH_ALL;if(n&&n.indexOf(u)<0){var o=function(){var e=u&S.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&u){case S.Transaction.SIGHASH_ALL:e+="SIGHASH_ALL";break;case S.Transaction.SIGHASH_SINGLE:e+="SIGHASH_SINGLE";break;case S.Transaction.SIGHASH_NONE:e+="SIGHASH_NONE"}return e}();throw new Error("Sighash type is not allowed. Retry the sign method passing the "+"sighashTypes array of whitelisted types. Sighash type: ".concat(o))}if(t.nonWitnessUtxo){var s=X(r,t,e),a=i.ins[e].hash,c=s.getHash();if(!a.equals(c))throw new Error("Non-witness UTXO hash for input #".concat(e," doesn't match the hash specified in the prevout"));var f,p,h=i.ins[e].index,l=s.outs[h],d=t.redeemScript?(R(e,l.script,t.redeemScript),t.redeemScript):l.script;if(A(d)){if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");L(e,d,t.witnessScript),p=i.hashForWitnessV0(e,t.witnessScript,l.value,u),d=t.witnessScript}else{p=N(d)?(f=k.p2pkh({hash:d.slice(2)}).output,i.hashForWitnessV0(e,f,l.value,u)):i.hashForSignature(e,d,u)}}else{if(!t.witnessUtxo)throw new Error("Need a Utxo input item for signing");var v=t.redeemScript?(R(e,t.witnessUtxo.script,t.redeemScript),t.redeemScript):t.witnessUtxo.script;if(N(v)){var y=k.p2pkh({hash:v.slice(2)}).output;p=i.hashForWitnessV0(e,y,t.witnessUtxo.value,u),d=v}else{if(!A(v))throw new Error("Input #".concat(e," has witnessUtxo but non-segwit script: ")+"".concat(v.toString("hex")));if(!t.witnessScript)throw new Error("Segwit input needs witnessScript if not P2WPKH");L(e,v,t.witnessScript),p=i.hashForWitnessV0(e,t.witnessScript,t.witnessUtxo.value,u),d=t.witnessScript}}return{script:d,sighashType:u,hash:p}}function W(e,t,r){var n=p.checkForInput(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw new Error("Need bip32Derivation to sign with HD");var i=n.bip32Derivation.map(function(e){return e.masterFingerprint.equals(r.fingerprint)?e:void 0}).filter(function(e){return!!e});if(0===i.length)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(function(e){var t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw new Error("pubkey did not match bip32Derivation");return t})}function j(i){var u=0;function o(){var e=_.decode(i,u);return u+=_.decode.bytes,e}return function(){for(var e,t=o(),r=[],n=0;n<t;n++)r.push((e=void 0,e=o(),u+=e,i.slice(u-e,u)));return r}()}function F(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;var n=S.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;var i=e,u=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get:function(){var e=i.__NON_WITNESS_UTXO_BUF_CACHE[u],t=i.__NON_WITNESS_UTXO_TX_CACHE[u];if(void 0!==e)return e;var r=t.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[u]=r},set:function(e){i.__NON_WITNESS_UTXO_BUF_CACHE[u]=e}})}function G(e,u,o,s){var a=0;e.forEach(function(e,t){var r,n,i;s&&e.finalScriptSig&&(u.ins[t].script=e.finalScriptSig),s&&e.finalScriptWitness&&(u.ins[t].witness=j(e.finalScriptWitness)),e.witnessUtxo?a+=e.witnessUtxo.value:e.nonWitnessUtxo&&(r=X(o,e,t),n=u.ins[t].index,i=r.outs[n],a+=i.value)});var t=u.outs.reduce(function(e,t){return e+t.value},0),r=a-t;if(r<0)throw new Error("Outputs are spending more than Inputs");var n=u.virtualSize();o.__FEE=r,o.__EXTRACTED_TX=u,o.__FEE_RATE=Math.floor(r/n)}function X(e,t,r){var n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||F(e,t,r),n[r]}function q(e){return i(Array(e).keys())}}).call(this,J(10).Buffer)},1786:function(e,c,f){"use strict";(function(n){var t=f(135),e=f(136);Object.defineProperty(c,"__esModule",{value:!0});var i=f(1787),u=f(1497),o=f(1281),s=f(1498),r=(e(a,[{key:"toBase64",value:function(){return this.toBuffer().toString("base64")}},{key:"toHex",value:function(){return this.toBuffer().toString("hex")}},{key:"toBuffer",value:function(){return u.psbtToBuffer(this)}},{key:"updateGlobal",value:function(e){return s.updateGlobal(e,this.globalMap),this}},{key:"updateInput",value:function(e,t){var r=s.checkForInput(this.inputs,e);return s.updateInput(t,r),this}},{key:"updateOutput",value:function(e,t){var r=s.checkForOutput(this.outputs,e);return s.updateOutput(t,r),this}},{key:"addUnknownKeyValToGlobal",value:function(e){return s.checkHasKey(e,this.globalMap.unknownKeyVals,s.getEnumLength(o.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}},{key:"addUnknownKeyValToInput",value:function(e,t){var r=s.checkForInput(this.inputs,e);return s.checkHasKey(t,r.unknownKeyVals,s.getEnumLength(o.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addUnknownKeyValToOutput",value:function(e,t){var r=s.checkForOutput(this.outputs,e);return s.checkHasKey(t,r.unknownKeyVals,s.getEnumLength(o.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}},{key:"addInput",value:function(e){var t=this;this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(function(e){return t.addUnknownKeyValToInput(n,e)}),s.addInputAttributes(this.inputs,e),this}},{key:"addOutput",value:function(e){var t=this;this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});var r=e.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(function(e){return t.addUnknownKeyValToInput(n,e)}),s.addOutputAttributes(this.outputs,e),this}},{key:"clearFinalizedInput",value:function(e){var t=s.checkForInput(this.inputs,e);s.inputCheckUncleanFinalized(e,t);for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(i)||delete t[i]}return this}},{key:"combine",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=i.combine([this].concat(t));return Object.assign(this,n),this}},{key:"getTransaction",value:function(){return this.globalMap.unsignedTx.toBuffer()}}],[{key:"fromBase64",value:function(e,t){var r=n.from(e,"base64");return this.fromBuffer(r,t)}},{key:"fromHex",value:function(e,t){var r=n.from(e,"hex");return this.fromBuffer(r,t)}},{key:"fromBuffer",value:function(e,t){var r=u.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}}]),a);function a(e){t(this,a),this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}c.Psbt=r}).call(this,f(10).Buffer)},1787:function(e,t,r){"use strict";var f=r(140);Object.defineProperty(t,"__esModule",{value:!0});var p=r(1497);function h(r,n,i){return function(t){var e;r.has(t)||(e=i.filter(function(e){return e.key.toString("hex")===t})[0],n.push(e),r.add(t))}}function l(e){return e.globalMap.unsignedTx}function d(e){var r=new Set;return e.forEach(function(e){var t=e.key.toString("hex");if(r.has(t))throw new Error("Combine: KeyValue Map keys should be unique");r.add(t)}),r}t.combine=function(e){var t=e[0],n=p.psbtToKeyVals(t),r=e.slice(1);if(0===r.length)throw new Error("Combine: Nothing to combine");var i=l(t);if(void 0===i)throw new Error("Combine: Self missing transaction");var u,o=d(n.globalKeyVals),s=n.inputKeyVals.map(d),a=n.outputKeyVals.map(d),c=f(r);try{for(c.s();!(u=c.n()).done;)!function(){var e=u.value,t=l(e);if(void 0===t||!t.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");var r=p.psbtToKeyVals(e);d(r.globalKeyVals).forEach(h(o,n.globalKeyVals,r.globalKeyVals)),r.inputKeyVals.map(d).forEach(function(e,t){return e.forEach(h(s[t],n.inputKeyVals[t],r.inputKeyVals[t]))}),r.outputKeyVals.map(d).forEach(function(e,t){return e.forEach(h(a[t],n.outputKeyVals[t],r.outputKeyVals[t]))})}()}catch(e){c.e(e)}finally{c.f()}return p.psbtFromKeyVals(i,{globalMapKeyVals:n.globalKeyVals,inputKeyVals:n.inputKeyVals,outputKeyVals:n.outputKeyVals})}},1788:function(e,t,r){"use strict";(function(n){var x=r(140);Object.defineProperty(t,"__esModule",{value:!0});var P=r(1427),B=r(1428),C=r(1372),R=r(1281);function N(e,t,r){if(!t.equals(n.from([r])))throw new Error("Format Error: Invalid ".concat(e," key: ").concat(t.toString("hex")))}function L(e,t){var r,n=t.globalMapKeyVals,i=t.inputKeyVals,u=t.outputKeyVals,o={unsignedTx:e},s=0,a=x(n);try{for(a.s();!(r=a.n()).done;){var c=r.value;switch(c.key[0]){case R.GlobalTypes.UNSIGNED_TX:if(N("global",c.key,R.GlobalTypes.UNSIGNED_TX),0<s)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");s++;break;case R.GlobalTypes.GLOBAL_XPUB:void 0===o.globalXpub&&(o.globalXpub=[]),o.globalXpub.push(P.globals.globalXpub.decode(c));break;default:o.unknownKeyVals||(o.unknownKeyVals=[]),o.unknownKeyVals.push(c)}}}catch(e){a.e(e)}finally{a.f()}var f,p=i.length,h=u.length,l=[],d=[],v=x(B.range(p));try{for(v.s();!(f=v.n()).done;){var y,w=f.value,g={},m=x(i[w]);try{for(m.s();!(y=m.n()).done;){var S=y.value;switch(P.inputs.checkPubkey(S),S.key[0]){case R.InputTypes.NON_WITNESS_UTXO:if(N("input",S.key,R.InputTypes.NON_WITNESS_UTXO),void 0!==g.nonWitnessUtxo||void 0!==g.witnessUtxo)throw new Error("Format Error: Input has multiple [NON_]WITNESS_UTXO");g.nonWitnessUtxo=P.inputs.nonWitnessUtxo.decode(S);break;case R.InputTypes.WITNESS_UTXO:if(N("input",S.key,R.InputTypes.WITNESS_UTXO),void 0!==g.nonWitnessUtxo||void 0!==g.witnessUtxo)throw new Error("Format Error: Input has multiple [NON_]WITNESS_UTXO");g.witnessUtxo=P.inputs.witnessUtxo.decode(S);break;case R.InputTypes.PARTIAL_SIG:void 0===g.partialSig&&(g.partialSig=[]),g.partialSig.push(P.inputs.partialSig.decode(S));break;case R.InputTypes.SIGHASH_TYPE:if(N("input",S.key,R.InputTypes.SIGHASH_TYPE),void 0!==g.sighashType)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");g.sighashType=P.inputs.sighashType.decode(S);break;case R.InputTypes.REDEEM_SCRIPT:if(N("input",S.key,R.InputTypes.REDEEM_SCRIPT),void 0!==g.redeemScript)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");g.redeemScript=P.inputs.redeemScript.decode(S);break;case R.InputTypes.WITNESS_SCRIPT:if(N("input",S.key,R.InputTypes.WITNESS_SCRIPT),void 0!==g.witnessScript)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");g.witnessScript=P.inputs.witnessScript.decode(S);break;case R.InputTypes.BIP32_DERIVATION:void 0===g.bip32Derivation&&(g.bip32Derivation=[]),g.bip32Derivation.push(P.inputs.bip32Derivation.decode(S));break;case R.InputTypes.FINAL_SCRIPTSIG:N("input",S.key,R.InputTypes.FINAL_SCRIPTSIG),g.finalScriptSig=P.inputs.finalScriptSig.decode(S);break;case R.InputTypes.FINAL_SCRIPTWITNESS:N("input",S.key,R.InputTypes.FINAL_SCRIPTWITNESS),g.finalScriptWitness=P.inputs.finalScriptWitness.decode(S);break;case R.InputTypes.POR_COMMITMENT:N("input",S.key,R.InputTypes.POR_COMMITMENT),g.porCommitment=P.inputs.porCommitment.decode(S);break;default:g.unknownKeyVals||(g.unknownKeyVals=[]),g.unknownKeyVals.push(S)}}}catch(e){m.e(e)}finally{m.f()}l.push(g)}}catch(e){v.e(e)}finally{v.f()}var b,E=x(B.range(h));try{for(E.s();!(b=E.n()).done;){var _,k=b.value,T={},O=x(u[k]);try{for(O.s();!(_=O.n()).done;){var I=_.value;switch(P.outputs.checkPubkey(I),I.key[0]){case R.OutputTypes.REDEEM_SCRIPT:if(N("output",I.key,R.OutputTypes.REDEEM_SCRIPT),void 0!==T.redeemScript)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");T.redeemScript=P.outputs.redeemScript.decode(I);break;case R.OutputTypes.WITNESS_SCRIPT:if(N("output",I.key,R.OutputTypes.WITNESS_SCRIPT),void 0!==T.witnessScript)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");T.witnessScript=P.outputs.witnessScript.decode(I);break;case R.OutputTypes.BIP32_DERIVATION:void 0===T.bip32Derivation&&(T.bip32Derivation=[]),T.bip32Derivation.push(P.outputs.bip32Derivation.decode(I));break;default:T.unknownKeyVals||(T.unknownKeyVals=[]),T.unknownKeyVals.push(I)}}}catch(e){O.e(e)}finally{O.f()}d.push(T)}}catch(e){E.e(e)}finally{E.f()}return{globalMap:o,inputs:l,outputs:d}}t.psbtFromBuffer=function(r,e){var t,n,i=0;function u(){var e=C.decode(r,i);i+=C.encodingLength(e);var t=r.slice(i,i+e);return i+=e,t}function o(){return{key:u(),value:u()}}function s(){if(i>=r.length)throw new Error("Format Error: Unexpected End of PSBT");var e=0===r.readUInt8(i);return e&&i++,e}if(1886610036!==(t=r.readUInt32BE(i),i+=4,t))throw new Error("Format Error: Invalid Magic Number");if(255!==(n=r.readUInt8(i),i+=1,n))throw new Error("Format Error: Magic Number must be followed by 0xff separator");for(var a=[],c={};!s();){var f=o(),p=f.key.toString("hex");if(c[p])throw new Error("Format Error: Keys must be unique for global keymap: key "+p);c[p]=1,a.push(f)}var h=a.filter(function(e){return e.key[0]===R.GlobalTypes.UNSIGNED_TX});if(1!==h.length)throw new Error("Format Error: Only one UNSIGNED_TX allowed");var l,d=e(h[0].value),v=d.getInputOutputCounts(),y=v.inputCount,w=v.outputCount,g=[],m=[],S=x(B.range(y));try{for(S.s();!(l=S.n()).done;){for(var b=l.value,E={},_=[];!s();){var k=o(),T=k.key.toString("hex");if(E[T])throw new Error("Format Error: Keys must be unique for each input: input index "+b+" key "+T);E[T]=1,_.push(k)}g.push(_)}}catch(e){S.e(e)}finally{S.f()}var O,I=x(B.range(w));try{for(I.s();!(O=I.n()).done;){for(var P=O.value,N={},A=[];!s();){var U=o(),H=U.key.toString("hex");if(N[H])throw new Error("Format Error: Keys must be unique for each output: output index "+P+" key "+H);N[H]=1,A.push(U)}m.push(A)}}catch(e){I.e(e)}finally{I.f()}return L(d,{globalMapKeyVals:a,inputKeyVals:g,outputKeyVals:m})},t.checkKeyBuffer=N,t.psbtFromKeyVals=L}).call(this,r(10).Buffer)},1789:function(e,t,r){"use strict";(function(o){var f=r(140),p=r(418);Object.defineProperty(t,"__esModule",{value:!0});var h=r(1281);t.decode=function(e){if(e.key[0]!==h.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");var t,r,n=e.key.slice(1),i={masterFingerprint:e.value.slice(0,4),extendedPubkey:n,path:"m"},u=f((r=e.value.length/4-1,p(Array(r).keys())));try{for(u.s();!(t=u.n()).done;){var o=t.value,s=e.value.readUInt32LE(4*o+4),a=!!(2147483648&s),c=2147483647&s;i.path+="/"+c.toString(10)+(a?"'":"")}}catch(e){u.e(e)}finally{u.f()}return i},t.encode=function(e){var t=o.from([h.GlobalTypes.GLOBAL_XPUB]),r=o.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=o.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);var u=4;return n.slice(1).forEach(function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,u),u+=4}),{key:r,value:i}},t.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",t.check=function(e){var t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return o.isBuffer(t)&&78===t.length&&-1<[2,3].indexOf(t[45])&&o.isBuffer(r)&&4===r.length&&"string"==typeof n&&!!n.match(/^m(\/\d+'?)+$/)},t.canAddToArray=function(e,t,r){var n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(function(e){return e.extendedPubkey.equals(t.extendedPubkey)}).length)}}).call(this,r(10).Buffer)},1790:function(e,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});var r=i(1281);n.encode=function(e){return{key:t.from([r.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}}).call(this,i(10).Buffer)},1791:function(e,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});var r=i(1281);n.decode=function(e){if(e.key[0]!==r.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},n.encode=function(e){return{key:t.from([r.InputTypes.FINAL_SCRIPTSIG]),value:e}},n.expected="Buffer",n.check=function(e){return t.isBuffer(e)},n.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}).call(this,i(10).Buffer)},1792:function(e,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});var r=i(1281);n.decode=function(e){if(e.key[0]!==r.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},n.encode=function(e){return{key:t.from([r.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},n.expected="Buffer",n.check=function(e){return t.isBuffer(e)},n.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}).call(this,i(10).Buffer)},1793:function(e,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});var r=i(1281);n.decode=function(e){if(e.key[0]!==r.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},n.encode=function(e){return{key:t.from([r.InputTypes.NON_WITNESS_UTXO]),value:e}},n.expected="Buffer",n.check=function(e){return t.isBuffer(e)},n.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo&&void 0===e.nonWitnessUtxo}}).call(this,i(10).Buffer)},1794:function(e,t,i){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(1281);t.decode=function(e){if(e.key[0]!==r.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},t.encode=function(e){var t=n.from([r.InputTypes.PARTIAL_SIG]);return{key:n.concat([t,e.pubkey]),value:e.signature}},t.expected="{ pubkey: Buffer; signature: Buffer; }",t.check=function(e){return n.isBuffer(e.pubkey)&&n.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!n.isBuffer(e)||e.length<9)return!1;if(48!==e[0])return!1;if(e.length!==e[1]+3)return!1;if(2!==e[2])return!1;var t=e[3];if(33<t||t<1)return!1;if(2!==e[3+t+1])return!1;var r=e[3+t+2];return!(33<r||r<1)&&e.length===3+t+2+r+2}(e.signature)},t.canAddToArray=function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(function(e){return e.pubkey.equals(t.pubkey)}).length)}}).call(this,i(10).Buffer)},1795:function(e,n,i){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});var r=i(1281);n.decode=function(e){if(e.key[0]!==r.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},n.encode=function(e){return{key:t.from([r.InputTypes.POR_COMMITMENT]),value:t.from(e,"utf8")}},n.expected="string",n.check=function(e){return"string"==typeof e},n.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}).call(this,i(10).Buffer)},1796:function(e,t,r){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(1281);t.decode=function(e){if(e.key[0]!==i.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},t.encode=function(e){var t=n.from([i.InputTypes.SIGHASH_TYPE]),r=n.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}},t.expected="number",t.check=function(e){return"number"==typeof e},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}).call(this,r(10).Buffer)},1797:function(e,t,r){"use strict";(function(u){Object.defineProperty(t,"__esModule",{value:!0});var o=r(1281),s=r(1428),a=r(1372);t.decode=function(e){if(e.key[0]!==o.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));var t=s.readUInt64LE(e.value,0),r=8,n=a.decode(e.value,8);r+=a.encodingLength(n);var i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}},t.encode=function(e){var t=e.script,r=e.value,n=a.encodingLength(t.length),i=u.allocUnsafe(8+n+t.length);return s.writeUInt64LE(i,r,0),a.encode(t.length,i,8),t.copy(i,8+n),{key:u.from([o.InputTypes.WITNESS_UTXO]),value:i}},t.expected="{ script: Buffer; value: number; }",t.check=function(e){return u.isBuffer(e.script)&&"number"==typeof e.value},t.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo&&void 0===e.nonWitnessUtxo}}).call(this,r(10).Buffer)},1798:function(e,t,r){"use strict";(function(o){var p=r(140),h=r(418);Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(f){return{decode:function(e){if(e.key[0]!==f)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+e.key.toString("hex"));if(34!==e.key.length&&66!==e.key.length||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");var t,r,n=e.key.slice(1),i={masterFingerprint:e.value.slice(0,4),pubkey:n,path:"m"},u=p((r=e.value.length/4-1,h(Array(r).keys())));try{for(u.s();!(t=u.n()).done;){var o=t.value,s=e.value.readUInt32LE(4*o+4),a=!!(2147483648&s),c=2147483647&s;i.path+="/"+c.toString(10)+(a?"'":"")}}catch(e){u.e(e)}finally{u.f()}return i},encode:function(e){var t=o.from([f]),r=o.concat([t,e.pubkey]),n=e.path.split("/"),i=o.allocUnsafe(4*n.length);e.masterFingerprint.copy(i,0);var u=4;return n.slice(1).forEach(function(e){var t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),i.writeUInt32LE(r,u),u+=4}),{key:r,value:i}},check:function(e){return o.isBuffer(e.pubkey)&&o.isBuffer(e.masterFingerprint)&&"string"==typeof e.path&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){var n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(function(e){return e.pubkey.equals(t.pubkey)}).length)}}}}).call(this,r(10).Buffer)},1799:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeChecker=function(r){return function(e){var t;if(r.includes(e.key[0])&&(33!==(t=e.key.slice(1)).length&&65!==t.length||![2,3,4].includes(t[0])))throw new Error("Format Error: invalid pubkey in key 0x"+e.key.toString("hex"));return t}}},1800:function(e,t,r){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode redeemScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(e){return{key:r.from([t]),value:e}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}).call(this,r(10).Buffer)},1801:function(e,t,r){"use strict";(function(r){Object.defineProperty(t,"__esModule",{value:!0}),t.makeConverter=function(t){return{decode:function(e){if(e.key[0]!==t)throw new Error("Decode Error: could not decode witnessScript with key 0x"+e.key.toString("hex"));return e.value},encode:function(e){return{key:r.from([t]),value:e}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}).call(this,r(10).Buffer)},1802:function(e,t,r){"use strict";(function(f){var c=r(1286);Object.defineProperty(t,"__esModule",{value:!0});var i=r(1427),p=r(1428);t.psbtToBuffer=function(e){function t(e){return 0===e.length?[f.from([0])]:e.map(p.keyValsToBuffer)}var r=h({globalMap:e.globalMap,inputs:e.inputs,outputs:e.outputs}),n=r.globalKeyVals,i=r.inputKeyVals,u=r.outputKeyVals,o=p.keyValsToBuffer(n),s=t(i),a=t(u),c=f.allocUnsafe(5);return c.writeUIntBE(482972169471,0,5),f.concat([c,o].concat(s,a))};var n=function(e,t){return e.key.compare(t.key)};function u(e,s){var a=new Set,t=Object.entries(e).reduce(function(e,t){var r=c(t,2),n=r[0],i=r[1];if("unknownKeyVals"===n)return e;var u=s[n];if(void 0===u)return e;var o=(Array.isArray(i)?i:[i]).map(u.encode);return o.map(function(e){return e.key.toString("hex")}).forEach(function(e){if(a.has(e))throw new Error("Serialize Error: Duplicate key: "+e);a.add(e)}),e.concat(o)},[]),r=e.unknownKeyVals?e.unknownKeyVals.filter(function(e){return!a.has(e.key.toString("hex"))}):[];return t.concat(r).sort(n)}function h(e){var t=e.globalMap,r=e.inputs,n=e.outputs;return{globalKeyVals:u(t,i.globals),inputKeyVals:r.map(function(e){return u(e,i.inputs)}),outputKeyVals:n.map(function(e){return u(e,i.outputs)})}}t.psbtToKeyVals=h}).call(this,r(10).Buffer)},1803:function(e,h,l){"use strict";(function(o){var d=l(1286),v=l(140),r=l(135),e=l(136);Object.defineProperty(h,"__esModule",{value:!0});var n=l(1423),s=l(1370),A=l(1804),a=l(1292),f=l(1425),i=l(1280),U=l(1368),H=l(1266),p=l(1266),y=l(1371),w=l(1290),g=l(1270),x=A.types,m=new Set(["p2pkh","p2pk","p2wpkh","p2ms","p2sh-p2pkh","p2sh-p2pk","p2sh-p2wpkh","p2sh-p2ms","p2wsh-p2pkh","p2wsh-p2pk","p2wsh-p2ms","p2sh-p2wsh-p2pkh","p2sh-p2wsh-p2pk","p2sh-p2wsh-p2ms"]);function S(e,t,r){try{g(e,t)}catch(e){throw new Error(r)}}var t=(e(u,[{key:"setLowR",value:function(e){return g(g.maybe(g.Boolean),e),void 0===e&&(e=!0),this.__USE_LOW_R=e}},{key:"setLockTime",value:function(e){if(g(w.UInt32,e),this.__INPUTS.some(function(e){return!!e.signatures&&e.signatures.some(function(e){return void 0!==e})}))throw new Error("No, this would invalidate signatures");this.__TX.locktime=e}},{key:"setVersion",value:function(e){g(w.UInt32,e),this.__TX.version=e}},{key:"addInput",value:function(e,t,r,n){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var i,u;return"string"==typeof e||e instanceof String?e=s.reverseBuffer(o.from(e,"hex")):e instanceof y.Transaction&&(n=(u=e.outs[t]).script,i=u.value,e=e.getHash(!1)),this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:n,value:i})}},{key:"addOutput",value:function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=n.toOutputScript(e,this.network)),this.__TX.addOutput(e,t)}},{key:"build",value:function(){return this.__build(!1)}},{key:"buildIncomplete",value:function(){return this.__build(!0)}},{key:"sign",value:function(e,t,r,n,i,u){!function(e){var t,r=e.input,n=e.ourPubKey,i=e.keyPair,u=e.signatureHash,o=e.hashType,s=e.useLowR,a=!1,c=v(r.pubkeys.entries());try{for(c.s();!(t=c.n()).done;){var f=d(t.value,2),p=f[0],h=f[1];if(n.equals(h)){if(r.signatures[p])throw new Error("Signature already exists");if(33!==n.length&&r.hasWitness)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var l=i.sign(u,s);r.signatures[p]=H.signature.encode(l,o),a=!0}}}catch(e){c.e(e)}finally{c.f()}if(!a)throw new Error("Key pair cannot sign for this input")}(function(e,t,r,n,i,u,o,s,a,c,f){var p;if("number"==typeof i)p=i;else{if("object"!=typeof i)throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");!function(e,t){if(!m.has(t.prevOutScriptType))throw new TypeError('Unknown prevOutScriptType "'.concat(t.prevOutScriptType,'"'));S(g.Number,t.vin,"sign must include vin parameter as Number (input index)"),S(w.Signer,t.keyPair,"sign must include keyPair parameter as Signer interface"),S(g.maybe(g.Number),t.hashType,"sign hashType parameter must be a number");var r=(e[t.vin]||[]).prevOutType,n=t.prevOutScriptType;switch(n){case"p2pkh":if(r&&"pubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2pk":if(r&&"pubkey"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2pk: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wpkh":if(r&&"witnesspubkeyhash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2wpkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2ms":if(r&&"multisig"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2ms: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2sh-p2wpkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type p2sh-p2wpkh: ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2ms":case"p2sh-p2pk":case"p2sh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.value(void 0),t.witnessScript,"".concat(n," requires NO witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires redeemScript")),S(g.value(void 0),t.witnessValue,"".concat(n," requires NO witnessValue"));break;case"p2wsh-p2ms":case"p2wsh-p2pk":case"p2wsh-p2pkh":if(r&&"witnessscripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),S(g.value(void 0),t.redeemScript,"".concat(n," requires NO redeemScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessValue"));break;case"p2sh-p2wsh-p2ms":case"p2sh-p2wsh-p2pk":case"p2sh-p2wsh-p2pkh":if(r&&"scripthash"!==r)throw new TypeError("input #".concat(t.vin," is not of type ").concat(n,": ").concat(r));S(g.Buffer,t.witnessScript,"".concat(n," requires witnessScript")),S(g.Buffer,t.redeemScript,"".concat(n," requires witnessScript")),S(w.Satoshi,t.witnessValue,"".concat(n," requires witnessScript"))}}(t,i),p=i.vin,u=i.keyPair,o=i.redeemScript,s=i.hashType,a=i.witnessValue,c=i.witnessScript}if(void 0===u)throw new Error("sign requires keypair");if(u.network&&u.network!==e)throw new TypeError("Inconsistent network");if(!t[p])throw new Error("No input at index: "+p);if(r(s=s||y.Transaction.SIGHASH_ALL))throw new Error("Transaction needs outputs");var h=t[p];if(void 0!==h.redeemScript&&o&&!h.redeemScript.equals(o))throw new Error("Inconsistent redeemScript");var l,d=u.publicKey||u.getPublicKey&&u.getPublicKey();if(!E(h)){if(void 0!==a){if(void 0!==h.value&&h.value!==a)throw new Error("Input did not match witnessValue");g(w.Satoshi,a),h.value=a}if(E(h)||(l=function(e,t,r,n){if(r&&n){var i=U.p2wsh({redeem:{output:n}}),u=U.p2wsh({output:r}),o=U.p2sh({redeem:{output:r}}),s=U.p2sh({redeem:i});if(!i.hash.equals(u.hash))throw new Error("Witness script inconsistent with prevOutScript");if(!o.hash.equals(s.hash))throw new Error("Redeem script inconsistent with prevOutScript");var a=b(i.redeem.output,t);if(!a.pubkeys)throw new Error(a.type+" not supported as witnessScript ("+H.toASM(n)+")");e.signatures&&e.signatures.some(function(e){return void 0!==e})&&(a.signatures=e.signatures);var c=n;if(a.type===x.P2WPKH)throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");return{redeemScript:r,redeemScriptType:x.P2WSH,witnessScript:n,witnessScriptType:a.type,prevOutType:x.P2SH,prevOutScript:o.output,hasWitness:!0,signScript:c,signType:a.type,pubkeys:a.pubkeys,signatures:a.signatures,maxSignatures:a.maxSignatures}}if(r){var f,p=U.p2sh({redeem:{output:r}});if(e.prevOutScript){try{f=U.p2sh({output:e.prevOutScript})}catch(e){throw new Error("PrevOutScript must be P2SH")}if(!p.hash.equals(f.hash))throw new Error("Redeem script inconsistent with prevOutScript")}var h=b(p.redeem.output,t);if(!h.pubkeys)throw new Error(h.type+" not supported as redeemScript ("+H.toASM(r)+")");e.signatures&&e.signatures.some(function(e){return void 0!==e})&&(h.signatures=e.signatures);var l=r;return h.type===x.P2WPKH&&(l=U.p2pkh({pubkey:h.pubkeys[0]}).output),{redeemScript:r,redeemScriptType:h.type,prevOutType:x.P2SH,prevOutScript:p.output,hasWitness:h.type===x.P2WPKH,signScript:l,signType:h.type,pubkeys:h.pubkeys,signatures:h.signatures,maxSignatures:h.maxSignatures}}if(n){var d=U.p2wsh({redeem:{output:n}});if(e.prevOutScript){var v=U.p2wsh({output:e.prevOutScript});if(!d.hash.equals(v.hash))throw new Error("Witness script inconsistent with prevOutScript")}var y=b(d.redeem.output,t);if(!y.pubkeys)throw new Error(y.type+" not supported as witnessScript ("+H.toASM(n)+")");e.signatures&&e.signatures.some(function(e){return void 0!==e})&&(y.signatures=e.signatures);var w=n;if(y.type===x.P2WPKH)throw new Error("P2WSH(P2WPKH) is a consensus failure");return{witnessScript:n,witnessScriptType:y.type,prevOutType:x.P2WSH,prevOutScript:d.output,hasWitness:!0,signScript:w,signType:y.type,pubkeys:y.pubkeys,signatures:y.signatures,maxSignatures:y.maxSignatures}}if(e.prevOutType&&e.prevOutScript){if(e.prevOutType===x.P2SH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(e.prevOutType===x.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires witnessScript");if(!e.prevOutScript)throw new Error("PrevOutScript is missing");var g=b(e.prevOutScript,t);if(!g.pubkeys)throw new Error(g.type+" not supported ("+H.toASM(e.prevOutScript)+")");e.signatures&&e.signatures.some(function(e){return void 0!==e})&&(g.signatures=e.signatures);var m=e.prevOutScript;return g.type===x.P2WPKH&&(m=U.p2pkh({pubkey:g.pubkeys[0]}).output),{prevOutType:g.type,prevOutScript:e.prevOutScript,hasWitness:g.type===x.P2WPKH,signScript:m,signType:g.type,pubkeys:g.pubkeys,signatures:g.signatures,maxSignatures:g.maxSignatures}}var S=U.p2pkh({pubkey:t}).output;return{prevOutType:x.P2PKH,prevOutScript:S,hasWitness:!1,signScript:S,signType:x.P2PKH,pubkeys:[t],signatures:[void 0]}}(h,d,o,c),Object.assign(h,l)),!E(h))throw Error(h.prevOutType+" not supported")}return{input:h,ourPubKey:d,keyPair:u,signatureHash:h.hasWitness?n.hashForWitnessV0(p,h.signScript,h.value,s):n.hashForSignature(p,h.signScript,s),hashType:s,useLowR:!!f}}(this.network,this.__INPUTS,this.__needsOutputs.bind(this),this.__TX,e,t,r,n,i,u,this.__USE_LOW_R))}},{key:"__addInputUnsafe",value:function(e,t,r){if(y.Transaction.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var n=e.toString("hex")+":"+t;if(void 0!==this.__PREV_TX_SET[n])throw new Error("Duplicate TxOut: "+n);var i,u,o={};void 0!==r.script&&(o=function e(t,r,n,i){if(0===t.length&&0===r.length)return{};var u,o;switch(n||(u=A.input(t,!0),o=A.witness(r,!0),u===x.NONSTANDARD&&(u=void 0),o===x.NONSTANDARD&&(o=void 0),n=u||o),n){case x.P2WPKH:var s=U.p2wpkh({witness:r}),a=s.output,c=s.pubkey,f=s.signature;return{prevOutScript:a,prevOutType:x.P2WPKH,pubkeys:[c],signatures:[f]};case x.P2PKH:var p=U.p2pkh({input:t}),h=p.output,l=p.pubkey,d=p.signature;return{prevOutScript:h,prevOutType:x.P2PKH,pubkeys:[l],signatures:[d]};case x.P2PK:var v=U.p2pk({input:t}).signature;return{prevOutType:x.P2PK,pubkeys:[void 0],signatures:[v]};case x.P2MS:var y=U.p2ms({input:t,output:i},{allowIncomplete:!0}),w=y.m,g=y.pubkeys,m=y.signatures;return{prevOutType:x.P2MS,pubkeys:g,signatures:m,maxSignatures:w}}if(n===x.P2SH){var S=U.p2sh({input:t,witness:r}),b=S.output,E=S.redeem,_=A.output(E.output),k=e(E.input,E.witness,_,E.output);return k.prevOutType?{prevOutScript:b,prevOutType:x.P2SH,redeemScript:E.output,redeemScriptType:k.prevOutType,witnessScript:k.witnessScript,witnessScriptType:k.witnessScriptType,pubkeys:k.pubkeys,signatures:k.signatures}:{}}if(n!==x.P2WSH)return{prevOutType:x.NONSTANDARD,prevOutScript:t};var T,O=U.p2wsh({input:t,witness:r}),I=O.output,P=O.redeem,N=A.output(P.output);return(T=N===x.P2WPKH?e(P.input,P.witness,N):e(H.compile(P.witness),[],N,P.output)).prevOutType?{prevOutScript:I,prevOutType:x.P2WSH,witnessScript:P.output,witnessScriptType:T.prevOutType,pubkeys:T.pubkeys,signatures:T.signatures}:{}}(r.script,r.witness||[])),void 0!==r.value&&(o.value=r.value),!o.prevOutScript&&r.prevOutScript&&(o.pubkeys||o.signatures||((u=b(r.prevOutScript)).pubkeys&&(o.pubkeys=u.pubkeys,o.signatures=u.signatures),i=u.type),o.prevOutScript=r.prevOutScript,o.prevOutType=i||A.output(r.prevOutScript));var s=this.__TX.addInput(e,t,r.sequence,r.scriptSig);return this.__INPUTS[s]=o,this.__PREV_TX_SET[n]=!0,s}},{key:"__build",value:function(n){if(!n){if(!this.__TX.ins.length)throw new Error("Transaction has no inputs");if(!this.__TX.outs.length)throw new Error("Transaction has no outputs")}var i=this.__TX.clone();if(this.__INPUTS.forEach(function(e,t){if(!e.prevOutType&&!n)throw new Error("Transaction is not complete");var r=function e(t,r,n){var i=r.pubkeys||[],u=r.signatures||[];switch(t){case x.P2PKH:if(0===i.length)break;if(0===u.length)break;return U.p2pkh({pubkey:i[0],signature:u[0]});case x.P2WPKH:if(0===i.length)break;if(0===u.length)break;return U.p2wpkh({pubkey:i[0],signature:u[0]});case x.P2PK:if(0===i.length)break;if(0===u.length)break;return U.p2pk({signature:u[0]});case x.P2MS:var o=r.maxSignatures,u=n?u.map(function(e){return e||p.OPS.OP_0}):u.filter(function(e){return e}),s=!n||o===u.length;return U.p2ms({m:o,pubkeys:i,signatures:u},{allowIncomplete:n,validate:s});case x.P2SH:var a=e(r.redeemScriptType,r,n);if(!a)return;return U.p2sh({redeem:{output:a.output||r.redeemScript,input:a.input,witness:a.witness}});case x.P2WSH:var c=e(r.witnessScriptType,r,n);if(!c)return;return U.p2wsh({redeem:{output:r.witnessScript,input:c.input,witness:c.witness}})}}(e.prevOutType,e,n);if(r)i.setInputScript(t,r.input),i.setWitness(t,r.witness);else{if(!n&&e.prevOutType===x.NONSTANDARD)throw new Error("Unknown input type");if(!n)throw new Error("Not enough information")}}),!n&&this.__overMaximumFees(i.virtualSize()))throw new Error("Transaction has absurd fees");return i}},{key:"__canModifyInputs",value:function(){return this.__INPUTS.every(function(e){return!e.signatures||e.signatures.every(function(e){return!e||0!=(c(e)&y.Transaction.SIGHASH_ANYONECANPAY)})})}},{key:"__needsOutputs",value:function(e){return e===y.Transaction.SIGHASH_ALL?0===this.__TX.outs.length:0===this.__TX.outs.length&&this.__INPUTS.some(function(e){return!!e.signatures&&e.signatures.some(function(e){return!(!e||c(e)&y.Transaction.SIGHASH_NONE)})})}},{key:"__canModifyOutputs",value:function(){var r=this.__TX.ins.length,n=this.__TX.outs.length;return this.__INPUTS.every(function(e){return void 0===e.signatures||e.signatures.every(function(e){if(!e)return!0;var t=31&c(e);return t===y.Transaction.SIGHASH_NONE||t===y.Transaction.SIGHASH_SINGLE&&r<=n})})}},{key:"__overMaximumFees",value:function(e){return(this.__INPUTS.reduce(function(e,t){return e+(t.value>>>0)},0)-this.__TX.outs.reduce(function(e,t){return e+t.value},0))/e>this.maximumFeeRate}}],[{key:"fromTransaction",value:function(r,e){var t=new u(e);return t.setVersion(r.version),t.setLockTime(r.locktime),r.outs.forEach(function(e){t.addOutput(e.script,e.value)}),r.ins.forEach(function(e){t.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness})}),t.__INPUTS.forEach(function(e,t){var o,s,a,c;s=r,a=t,(o=e).redeemScriptType===x.P2MS&&o.redeemScript&&o.pubkeys.length!==o.signatures.length&&(c=o.signatures.concat(),o.signatures=o.pubkeys.map(function(e){var i,u=f.fromPublicKey(e);return c.some(function(e,t){if(!e)return!1;var r=H.signature.decode(e),n=s.hashForSignature(a,o.redeemScript,r.hashType);return!!u.verify(n,r.signature)&&(c[t]=void 0,i=e,!0)}),i}))}),t}}]),u);function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.bitcoin,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2500;r(this,u),this.network=e,this.maximumFeeRate=t,this.__PREV_TX_SET={},this.__INPUTS=[],this.__TX=new y.Transaction,this.__TX.version=2,this.__USE_LOW_R=!1}function b(e,t){g(w.Buffer,e);var r=A.output(e);switch(r){case x.P2PKH:if(!t)return{type:r};var n=U.p2pkh({output:e}).hash,i=a.hash160(t);return n.equals(i)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case x.P2WPKH:if(!t)return{type:r};var u=U.p2wpkh({output:e}).hash,o=a.hash160(t);return u.equals(o)?{type:r,pubkeys:[t],signatures:[void 0]}:{type:r};case x.P2PK:return{type:r,pubkeys:[U.p2pk({output:e}).pubkey],signatures:[void 0]};case x.P2MS:var s=U.p2ms({output:e});return{type:r,pubkeys:s.pubkeys,signatures:s.pubkeys.map(function(){}),maxSignatures:s.m}}return{type:r}}function E(e){return void 0!==e.signScript&&void 0!==e.signType&&void 0!==e.pubkeys&&void 0!==e.signatures&&e.signatures.length===e.pubkeys.length&&0<e.pubkeys.length&&(!1===e.hasWitness||void 0!==e.value)}function c(e){return e.readUInt8(e.length-1)}h.TransactionBuilder=t}).call(this,l(10).Buffer)},1804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1429),u=r(1807),o=r(1430),s=r(1431),a=r(1812),c=r(1815),f=r(1817),p=r(1819),h={P2MS:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};t.types=h,t.output=function(e){if(f.output.check(e))return h.P2WPKH;if(p.output.check(e))return h.P2WSH;if(s.output.check(e))return h.P2PKH;if(a.output.check(e))return h.P2SH;var t=n.decompile(e);if(!t)throw new TypeError("Invalid script");return i.output.check(t)?h.P2MS:o.output.check(t)?h.P2PK:c.output.check(t)?h.WITNESS_COMMITMENT:u.output.check(t)?h.NULLDATA:h.NONSTANDARD},t.input=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return s.input.check(r)?h.P2PKH:a.input.check(r,t)?h.P2SH:i.input.check(r,t)?h.P2MS:o.input.check(r)?h.P2PK:h.NONSTANDARD},t.witness=function(e,t){var r=n.decompile(e);if(!r)throw new TypeError("Invalid script");return f.input.check(r)?h.P2WPKH:p.input.check(r,t)?h.P2WSH:h.NONSTANDARD}},1805:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){return e===i.OPS.OP_0||n.isCanonicalScriptSignature(e)}function o(e,t){var r=n.decompile(e);return!(r.length<2)&&r[0]===i.OPS.OP_0&&(t?r.slice(1).every(u):r.slice(1).every(n.isCanonicalScriptSignature))}(t.check=o).toJSON=function(){return"multisig input"}},1806:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r(1266),o=r(1266),s=r(1290),a=o.OPS.OP_RESERVED;function n(e,t){var r=u.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==o.OPS.OP_CHECKMULTISIG)return!1;if(!s.Number(r[0]))return!1;if(!s.Number(r[r.length-2]))return!1;var n=r[0]-a,i=r[r.length-2]-a;return!(n<=0)&&!(16<i)&&!(i<n)&&i==r.length-3&&(!!t||r.slice(1,-2).every(u.isCanonicalPubKey))}(t.check=n).toJSON=function(){return"multi-sig output"}},1807:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=n.OPS;function u(e){var t=n.compile(e);return 1<t.length&&t[0]===i.OP_RETURN}(t.check=u).toJSON=function(){return"null data output"};var o={check:u};t.output=o},1808:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266);function i(e){var t=n.decompile(e);return 1===t.length&&n.isCanonicalScriptSignature(t[0])}(t.check=i).toJSON=function(){return"pubKey input"}},1809:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalPubKey(t[0])&&t[1]===i.OPS.OP_CHECKSIG}(t.check=u).toJSON=function(){return"pubKey output"}},1810:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266);function i(e){var t=n.decompile(e);return 2===t.length&&n.isCanonicalScriptSignature(t[0])&&n.isCanonicalPubKey(t[1])}(t.check=i).toJSON=function(){return"pubKeyHash input"}},1811:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){var t=n.compile(e);return 25===t.length&&t[0]===i.OPS.OP_DUP&&t[1]===i.OPS.OP_HASH160&&20===t[2]&&t[23]===i.OPS.OP_EQUALVERIFY&&t[24]===i.OPS.OP_CHECKSIG}(t.check=u).toJSON=function(){return"pubKeyHash output"}},1812:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1813);t.input=n;var i=r(1814);t.output=i},1813:function(e,t,r){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0});var s=r(1266),a=r(1429),c=r(1430),f=r(1431),p=r(1499),h=r(1500);function e(e,t){var r=s.decompile(e);if(r.length<1)return!1;var n=r[r.length-1];if(!o.isBuffer(n))return!1;var i=s.decompile(s.compile(r.slice(0,-1))),u=s.decompile(n);return!!u&&!!s.isPushOnly(i)&&(1===r.length?h.check(u)||p.check(u):!(!f.input.check(i)||!f.output.check(u))||!(!a.input.check(i,t)||!a.output.check(u))||!(!c.input.check(i)||!c.output.check(u)))}(t.check=e).toJSON=function(){return"scriptHash input"}}).call(this,r(10).Buffer)},1814:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266),i=r(1266);function u(e){var t=n.compile(e);return 23===t.length&&t[0]===i.OPS.OP_HASH160&&20===t[1]&&t[22]===i.OPS.OP_EQUAL}(t.check=u).toJSON=function(){return"scriptHash output"}},1815:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1816);t.output=n},1816:function(e,a,c){"use strict";(function(r){Object.defineProperty(a,"__esModule",{value:!0});var n=c(1266),i=c(1266),u=c(1290),o=c(1270),s=r.from("aa21a9ed","hex");function t(e){var t=n.compile(e);return 37<t.length&&t[0]===i.OPS.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(s)}(a.check=t).toJSON=function(){return"Witness commitment output"},a.encode=function(e){o(u.Hash256bit,e);var t=r.allocUnsafe(36);return s.copy(t,0),e.copy(t,4),n.compile([i.OPS.OP_RETURN,t])},a.decode=function(e){return o(t,e),n.decompile(e)[1].slice(4,36)}}).call(this,c(10).Buffer)},1817:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1818);t.input=n;var i=r(1499);t.output=i},1818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1266);function i(e){var t,r=n.decompile(e);return 2===r.length&&n.isCanonicalScriptSignature(r[0])&&(t=r[1],n.isCanonicalPubKey(t)&&33===t.length)}(t.check=i).toJSON=function(){return"witnessPubKeyHash input"}},1819:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1820);t.input=n;var i=r(1500);t.output=i},1820:function(e,t,r){"use strict";(function(u){Object.defineProperty(t,"__esModule",{value:!0});var o=r(1266),s=r(1270),a=r(1429),c=r(1430),f=r(1431);function e(e,t){if(s(s.Array,e),e.length<1)return!1;var r=e[e.length-1];if(!u.isBuffer(r))return!1;var n=o.decompile(r);if(!n||0===n.length)return!1;var i=o.compile(e.slice(0,-1));return!(!f.input.check(i)||!f.output.check(n))||!(!a.input.check(i,t)||!a.output.check(n))||!(!c.input.check(i)||!c.output.check(n))}(t.check=e).toJSON=function(){return"witnessScriptHash input"}}).call(this,r(10).Buffer)}}]);